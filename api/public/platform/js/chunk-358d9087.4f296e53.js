(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-358d9087"],{"44bc":function(t,e,o){"use strict";o("516a")},"516a":function(t,e,o){},"5a62":function(t,e,o){"use strict";o("f22e")},b3fe:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"m20 p20 bg-white"},[t._m(0),o("div",{staticClass:"p10 bg-grey"},[o("div",{staticClass:"flex row-between p15 r8 bg-white"},[o("div",[o("el-button",{staticClass:"mr10",attrs:{size:"small"},on:{click:t.allUnFold}},[t._v("展开全部")]),o("el-button",{attrs:{size:"small"},on:{click:t.allFold}},[t._v("折叠全部")])],1),o("el-button",{attrs:{size:"small"},on:{click:t.addGroup}},[t._v("新增一级分组")])],1),o("draggable",{model:{value:t.project.config.goodsGroups,callback:function(e){t.$set(t.project.config,"goodsGroups",e)},expression:"project.config.goodsGroups"}},t._l(t.project.config.goodsGroups,(function(e){return o("div",{key:e.type,staticClass:"group mt10 p10 bg-white"},[o("div",{staticClass:"group-head flex row-between col-center p15"},[o("div",[e.fold?o("i",{staticClass:"el-icon-arrow-down f14 mr10 pointer",on:{click:function(o){return t.fold(e)}}}):o("i",{staticClass:"el-icon-arrow-right f14 mr10 pointer",on:{click:function(o){return t.fold(e)}}}),o("span",{staticClass:"f12"},[t._v(t._s(e.name))])]),o("div",{staticClass:"f-theme f12"},[o("span",{staticClass:"mr10 pointer",on:{click:t.addType}},[t._v("新增二级分组")]),o("span",{staticClass:"mr10 pointer",on:{click:function(o){return t.editGroup(e)}}},[t._v("编辑")]),o("span",{staticClass:"mr10 pointer",on:{click:function(o){return t.delGroup(e.type)}}},[t._v("删除")])])]),e.child.length&&e.fold?o("ul",{staticClass:"group-body"},t._l(e.child,(function(e){return o("li",{key:e.type,staticClass:"group-body-item"},[o("div",{staticClass:"flex-center"},[o("img",{staticClass:"w35 h35 mr15",attrs:{src:e.image}}),o("span",[t._v(t._s(e.name))])]),o("div",{staticClass:"f-theme f12"},[o("span",{staticClass:"mr10 pointer",on:{click:function(o){return t.editType(e)}}},[t._v("编辑")]),o("span",{staticClass:"pointer",on:{click:function(o){return t.delType(e)}}},[t._v("删除")])])])})),0):t._e()])})),0)],1),o("edit",{ref:"edit"})],1)},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mt10 mb20"},[o("span",{staticClass:"mr20 f14"},[t._v("商品分组")]),o("span",{staticClass:"f12 f-grey"},[t._v("拖拽可调整分组顺序，保存生效")])])}],r=o("5530"),n=(o("d81d"),o("a434"),o("7db0"),o("2f62")),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"edit"},[o("el-dialog",{attrs:{title:"add"==t.type?"新增分组":"编辑分组",visible:t.show,width:"25%"},on:{"update:visible":function(e){t.show=e}}},[o("div",{staticClass:"auto-center"},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.form,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"级别",prop:"level",verify:""}},[o("el-radio",{attrs:{label:1,disabled:"edit"==t.type},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[t._v("一级")]),o("el-radio",{attrs:{label:2,disabled:"edit"==t.type},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[t._v("二级")])],1),"1"==t.form.level?o("el-form-item",{attrs:{label:"一级分组名称",prop:"name",verify:{maxLen:4}}},[o("el-input",{staticStyle:{width:"150px"},attrs:{maxlength:"4","show-word-limit":"",size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1):t._e(),"2"==t.form.level?[o("el-form-item",{attrs:{label:"上级分组",prop:"parentType",verify:""}},[o("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择上级分组",size:"small",disabled:"edit"==t.type},model:{value:t.form.parentType,callback:function(e){t.$set(t.form,"parentType",e)},expression:"form.parentType"}},t._l(t.project.config.goodsGroups,(function(t){return o("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})})),1)],1),o("el-form-item",{attrs:{label:"二级分组名称",prop:"name",verify:{maxLen:6}}},[o("el-input",{staticStyle:{width:"150px"},attrs:{maxlength:"4","show-word-limit":"",size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"二级分组图片",prop:"image",verify:""}},[o("Imgpond",{attrs:{count:1},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1),o("el-form-item",{attrs:{label:"二级分组商品",prop:"shopList"}},[o("groupGoods",{model:{value:t.form.shopList,callback:function(e){t.$set(t.form,"shopList",e)},expression:"form.shopList"}})],1)]:t._e()],2)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.close}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)])],1)},a=[],c=(o("b0c0"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex flex-wrap"},[t._l(t.list,(function(t,e){return o("div",{staticClass:"flex-center h45 w45 mr10 mb10 shadow"},[o("img",{staticClass:"w-100 h-100",attrs:{src:t.cover}})])})),o("div",{staticClass:"flex-center h45 w45 shadow pointer",on:{click:function(e){t.show=!0}}},[t._v("+")]),t.show?o("GoodsConfigChoose",{attrs:{show:t.show,activeList:t.mValue},on:{"update:show":function(e){t.show=e},submit:t.submit}}):t._e()],2)}),f=[],p=o("1da1"),u=(o("96cf"),o("c40e")),d={props:["value"],data:function(){return{show:!1,mValue:[],list:[]}},computed:Object(r["a"])({},Object(n["b"])(["project"])),watch:{value:{immediate:!0,deep:!0,handler:function(t,e){this.mValue=this.value}},mValue:{immediate:!0,handler:function(t,e){this.getList(),this.$emit("input",t)}}},methods:{getList:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var o,s,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o={projectId:t.project.id,ids:t.mValue},e.next=3,Object(u["d"])(o);case 3:s=e.sent,i=s.status,r=s.list,"10000"==i&&(t.list=r);case 7:case"end":return e.stop()}}),e)})))()},submit:function(t){this.mValue=t}}},m=d,h=o("2877"),v=Object(h["a"])(m,c,f,!1,null,null,null),b=v.exports,g={components:{groupGoods:b},data:function(){return{type:"",form:{},show:!1}},computed:Object(r["a"])({},Object(n["b"])(["project"])),methods:{open:function(t,e){e?(this.type="edit",this.form=this.$cloneDeep(e)):(this.type="add",this.form={level:t}),this.show=!0},close:function(){this.type="",this.form={},this.show=!1},submitForm:function(){var t=this;this.$refs["ruleForm"].validate((function(e){if(!e)return!1;"add"==t.type?t.add():t.edit(),t.close()}))},add:function(){var t=this;if(1==this.form.level)this.form.type=this.$getRandomCode(4),this.form.child=[],this.project.config.goodsGroups.push(this.form);else{this.form.type=this.$getRandomCode(4);var e=this.project.config.goodsGroups.find((function(e){return e.type==t.form.parentType}));e.child.push(this.form)}},edit:function(){var t=this;if(1==this.form.level){var e=this.project.config.goodsGroups.find((function(e){return e.type==t.form.type}));e.name=this.form.name}else{var o=this.project.config.goodsGroups.find((function(e){return e.type==t.form.parentType})),s=o.child.reduce((function(e,o,s){return o.type==t.form.type&&(e=s),e}),0);o.child.splice(s,1,this.form)}}}},y=g,w=(o("5a62"),Object(h["a"])(y,l,a,!1,null,"64494170",null)),_=w.exports,C={name:"groupManager",components:{Edit:_},data:function(){return{}},computed:Object(r["a"])({},Object(n["b"])(["project"])),methods:{fold:function(t){t.fold?this.$set(t,"fold",!1):this.$set(t,"fold",!0)},allFold:function(){this.project.config.goodsGroups.map((function(t){return t.fold=!1}))},allUnFold:function(){this.project.config.goodsGroups.map((function(t){return t.fold=!0}))},addGroup:function(){this.$refs.edit.open(1)},editGroup:function(t){this.$refs.edit.open(1,t)},delGroup:function(t){var e=this.project.config.goodsGroups,o=e.reduce((function(e,o,s){return o.type==t&&(e=s),e}),0);e.splice(o,1)},addType:function(){this.$refs.edit.open(2)},editType:function(t){this.$refs.edit.open(2,t)},delType:function(t){var e=this.project.config.goodsGroups.find((function(e){return e.type==t.parentType})),o=e.child.reduce((function(e,o,s){return o.type==t.type&&(e=s),e}),0);e.child.splice(o,1)}}},j=C,k=(o("44bc"),Object(h["a"])(j,s,i,!1,null,"efff73ac",null));e["default"]=k.exports},f22e:function(t,e,o){}}]);
//# sourceMappingURL=chunk-358d9087.4f296e53.js.map