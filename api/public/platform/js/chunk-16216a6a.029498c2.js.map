{"version":3,"sources":["webpack:///./src/pages/mall/goods/goods-manager/edit.vue?7645","webpack:///./src/pages/mall/goods/goods-manager/edit.vue?d7d6","webpack:///src/pages/mall/goods/goods-manager/edit.vue","webpack:///./src/pages/mall/goods/goods-manager/edit.vue?c29e","webpack:///./src/pages/mall/goods/goods-manager/edit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","form","maxLen","staticStyle","model","value","callback","$$v","$set","expression","_v","gte","type","on","$event","submit","staticRenderFns","created","price","originalPrice","data","computed","methods","$refs","validate","valid","formatParams","component"],"mappings":"2IAAA,W,2CCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,UAAU,CAACG,IAAI,OAAOD,YAAY,OAAOE,MAAM,CAAC,iBAAiB,QAAQ,cAAc,QAAQ,MAAQR,EAAIS,KAAK,KAAO,UAAU,CAACL,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,OAAO,OAAS,CAAEE,OAAQ,MAAO,CAACN,EAAG,WAAW,CAACO,YAAY,CAAC,MAAQ,SAASC,MAAM,CAACC,MAAOb,EAAIS,KAAS,KAAEK,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIS,KAAM,OAAQM,IAAME,WAAW,eAAeb,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIkB,GAAG,mBAAmB,GAAGd,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,QAAQ,KAAO,WAAW,OAAS,CAAEE,OAAQ,MAAO,CAACN,EAAG,WAAW,CAACO,YAAY,CAAC,MAAQ,SAASC,MAAM,CAACC,MAAOb,EAAIS,KAAa,SAAEK,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIS,KAAM,WAAYM,IAAME,WAAW,mBAAmBb,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIkB,GAAG,iCAAiC,GAAGd,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,QAAQ,KAAO,QAAQ,OAAS,KAAK,CAACJ,EAAG,UAAU,CAACI,MAAM,CAAC,MAAQ,GAAGI,MAAM,CAACC,MAAOb,EAAIS,KAAU,MAAEK,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIS,KAAM,QAASM,IAAME,WAAW,gBAAgBb,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIkB,GAAG,qBAAqB,GAAGd,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,UAAU,OAAS,KAAK,CAACJ,EAAG,UAAU,CAACI,MAAM,CAAC,MAAQ,IAAII,MAAM,CAACC,MAAOb,EAAIS,KAAY,QAAEK,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIS,KAAM,UAAWM,IAAME,WAAW,kBAAkBb,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIkB,GAAG,2CAA2C,GAAGd,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,MAAM,KAAO,QAAQ,OAAS,CAAEW,IAAK,EAAGC,KAAM,QAAS,CAAChB,EAAG,WAAW,CAACO,YAAY,CAAC,MAAQ,SAASC,MAAM,CAACC,MAAOb,EAAIS,KAAU,MAAEK,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIS,KAAM,QAASM,IAAME,WAAW,iBAAiB,GAAGb,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,gBAAgB,OAAS,CAAEW,IAAK,EAAGC,KAAM,QAAS,CAAChB,EAAG,WAAW,CAACO,YAAY,CAAC,MAAQ,SAASC,MAAM,CAACC,MAAOb,EAAIS,KAAkB,cAAEK,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIS,KAAM,gBAAiBM,IAAME,WAAW,yBAAyB,GAAGb,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,UAAU,CAACJ,EAAG,UAAU,CAACO,YAAY,CAAC,MAAQ,SAASC,MAAM,CAACC,MAAOb,EAAIS,KAAa,SAAEK,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIS,KAAM,WAAYM,IAAME,WAAW,oBAAoB,IAAI,GAAGb,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,YAAY,CAACE,YAAY,mBAAmBE,MAAM,CAAC,KAAO,SAASa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOtB,EAAIuB,YAAY,CAACvB,EAAIkB,GAAG,WAAW,IAAI,IAC/5EM,EAAkB,G,4DC6EtB,GACEC,QADF,WAEI,IAAJ,qBAEIhB,EAAKiB,MAAQjB,EAAKiB,MAAQjB,EAAKiB,MAAQ,IAAM,EAC7CjB,EAAKkB,cAAgBlB,EAAKkB,cAAgBlB,EAAKkB,cAAgB,IAAM,EACrE1B,KAAKQ,KAAOA,GAEdmB,KARF,WASI,MAAO,CACLnB,KAAM,KAGVoB,SAAU,OAAZ,OAAY,CAAZ,GACA,6BAEEC,QAAS,CAEPP,OAFJ,WAEA,WACMtB,KAAK8B,MAAM,QAAQC,UAAS,SAAlC,GACYC,IACF,EAAV,8BAMI,IAXJ,WAWA,yKACA,iCACA,wBACA,SAHA,SAMA,kBANA,gBAMA,EANA,EAMA,OAEA,aACA,WACA,WACA,iBACA,iBAEA,wCAdA,8CAmBI,KA9BJ,WA8BA,gLACA,uCADA,gBACA,EADA,EACA,OAEA,aACA,WACA,WACA,iBACA,iBAEA,wCATA,8CAaIC,aA3CJ,SA2CA,GACM,IAAN,qBAIM,OAFAN,EAAKF,MAAqB,IAAbE,EAAKF,MAClBE,EAAKD,cAAqC,IAArBC,EAAKD,cACnBC,KC9I8W,I,wBCQvXO,EAAY,eACd,EACApC,EACAyB,GACA,EACA,KACA,WACA,MAIa,aAAAW,E","file":"js/chunk-16216a6a.029498c2.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/px2rem-loader/index.js??ref--8-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-5!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=style&index=0&id=3a8ec6c8&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m20 p20 bg-white\"},[_c('el-form',{ref:\"form\",staticClass:\"mb50\",attrs:{\"label-position\":\"right\",\"label-width\":\"120px\",\"model\":_vm.form,\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名：\",\"prop\":\"name\",\"verify\":{ maxLen: 30 }}},[_c('el-input',{staticStyle:{\"width\":\"500px\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('div',{staticClass:\"f12 f-grey\"},[_vm._v(\"商品名称，建议30字以内\")])],1),_c('el-form-item',{attrs:{\"label\":\"商品描述：\",\"prop\":\"describe\",\"verify\":{ maxLen: 60 }}},[_c('el-input',{staticStyle:{\"width\":\"500px\"},model:{value:(_vm.form.describe),callback:function ($$v) {_vm.$set(_vm.form, \"describe\", $$v)},expression:\"form.describe\"}}),_c('div',{staticClass:\"f12 f-grey\"},[_vm._v(\" 在商品详情页标题下面展示卖点信息，建议60字以内 \")])],1),_c('el-form-item',{attrs:{\"label\":\"商品封面：\",\"prop\":\"cover\",\"verify\":\"\"}},[_c('Imgpond',{attrs:{\"count\":1},model:{value:(_vm.form.cover),callback:function ($$v) {_vm.$set(_vm.form, \"cover\", $$v)},expression:\"form.cover\"}}),_c('div',{staticClass:\"f12 f-grey\"},[_vm._v(\"建议尺寸：800*800像素\")])],1),_c('el-form-item',{attrs:{\"label\":\"商品图：\",\"prop\":\"imgList\",\"verify\":\"\"}},[_c('Imgpond',{attrs:{\"count\":10},model:{value:(_vm.form.imgList),callback:function ($$v) {_vm.$set(_vm.form, \"imgList\", $$v)},expression:\"form.imgList\"}}),_c('div',{staticClass:\"f12 f-grey\"},[_vm._v(\" 建议尺寸：800*800像素，你可以拖拽图片调整顺序，最多上传10张 \")])],1),_c('el-form-item',{attrs:{\"label\":\"价格：\",\"prop\":\"price\",\"verify\":{ gte: 0, type: '数字' }}},[_c('el-input',{staticStyle:{\"width\":\"150px\"},model:{value:(_vm.form.price),callback:function ($$v) {_vm.$set(_vm.form, \"price\", $$v)},expression:\"form.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"划线价：\",\"prop\":\"originalPrice\",\"verify\":{ gte: 0, type: '数字' }}},[_c('el-input',{staticStyle:{\"width\":\"150px\"},model:{value:(_vm.form.originalPrice),callback:function ($$v) {_vm.$set(_vm.form, \"originalPrice\", $$v)},expression:\"form.originalPrice\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品详情：\"}},[_c('MiniMCE',{staticStyle:{\"width\":\"800px\"},model:{value:(_vm.form.richText),callback:function ($$v) {_vm.$set(_vm.form, \"richText\", $$v)},expression:\"form.richText\"}})],1)],1),_c('div',{staticClass:\"operation\"},[_c('el-button',{staticClass:\"f-white bg-theme\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"保存商品\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Description: What's this for\r\n * @Autor: WangYuan\r\n * @Date: 2021-08-17 10:18:09\r\n * @LastEditors: WangYuan\r\n * @LastEditTime: 2021-12-08 20:50:34\r\n-->\r\n<template>\r\n  <div class=\"m20 p20 bg-white\">\r\n    <el-form\r\n      label-position=\"right\"\r\n      label-width=\"120px\"\r\n      :model=\"form\"\r\n      ref=\"form\"\r\n      size=\"small\"\r\n      class=\"mb50\"\r\n    >\r\n      <el-form-item label=\"商品名：\" prop=\"name\" :verify=\"{ maxLen: 30 }\">\r\n        <el-input v-model=\"form.name\" style=\"width: 500px\"></el-input>\r\n        <div class=\"f12 f-grey\">商品名称，建议30字以内</div>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品描述：\" prop=\"describe\" :verify=\"{ maxLen: 60 }\">\r\n        <el-input v-model=\"form.describe\" style=\"width: 500px\"></el-input>\r\n        <div class=\"f12 f-grey\">\r\n          在商品详情页标题下面展示卖点信息，建议60字以内\r\n        </div>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品封面：\" prop=\"cover\" verify>\r\n        <Imgpond v-model=\"form.cover\" :count=\"1\" />\r\n        <div class=\"f12 f-grey\">建议尺寸：800*800像素</div>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品图：\" prop=\"imgList\" verify>\r\n        <Imgpond v-model=\"form.imgList\" :count=\"10\" />\r\n        <div class=\"f12 f-grey\">\r\n          建议尺寸：800*800像素，你可以拖拽图片调整顺序，最多上传10张\r\n        </div>\r\n      </el-form-item>\r\n      <el-form-item\r\n        label=\"价格：\"\r\n        prop=\"price\"\r\n        :verify=\"{ gte: 0, type: '数字' }\"\r\n      >\r\n        <el-input v-model=\"form.price\" style=\"width: 150px\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item\r\n        label=\"划线价：\"\r\n        prop=\"originalPrice\"\r\n        :verify=\"{ gte: 0, type: '数字' }\"\r\n      >\r\n        <el-input v-model=\"form.originalPrice\" style=\"width: 150px\"></el-input>\r\n      </el-form-item>\r\n      <!-- <el-form-item\r\n        label=\"库存：\"\r\n        prop=\"inventory\"\r\n        :verify=\"{gte:1,lte:10000,type:'数字'}\"\r\n      >\r\n        <el-input\r\n          v-model=\"form.inventory\"\r\n          style=\"width:150px\"\r\n        ></el-input>\r\n      </el-form-item> -->\r\n      <el-form-item label=\"商品详情：\">\r\n        <MiniMCE style=\"width: 800px\" v-model=\"form.richText\" />\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div class=\"operation\">\r\n      <el-button size=\"small\" class=\"f-white bg-theme\" @click=\"submit()\"\r\n        >保存商品</el-button\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport { addGoods, editGoods } from \"@/api/goods\";\r\n\r\nexport default {\r\n  created() {\r\n    let form = this.$route.params;\r\n    // 价格改为元设置\r\n    form.price = form.price ? form.price / 100 : 0;\r\n    form.originalPrice = form.originalPrice ? form.originalPrice / 100 : 0;\r\n    this.form = form;\r\n  },\r\n  data() {\r\n    return {\r\n      form: {},\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"project\"]),\r\n  },\r\n  methods: {\r\n    // 提交\r\n    submit() {\r\n      this.$refs[\"form\"].validate((valid) => {\r\n        if (valid) {\r\n          this.form.id ? this.edit() : this.add();\r\n        }\r\n      });\r\n    },\r\n\r\n    // 新增\r\n    async add() {\r\n      let data = this.formatParams({\r\n        projectId: this.project.id,\r\n        ...this.form,\r\n      });\r\n\r\n      let { status } = await addGoods(data);\r\n\r\n      if (status == \"10000\") {\r\n        this.$notify({\r\n          title: \"成功\",\r\n          message: \"商品发布成功\",\r\n          type: \"success\",\r\n        });\r\n        this.$router.push({ name: \"goods-manager\" });\r\n      }\r\n    },\r\n\r\n    // 编辑\r\n    async edit() {\r\n      let { status } = await editGoods(this.formatParams(this.form));\r\n\r\n      if (status == \"10000\") {\r\n        this.$notify({\r\n          title: \"成功\",\r\n          message: \"商品修改成功\",\r\n          type: \"success\",\r\n        });\r\n        this.$router.push({ name: \"goods-manager\" });\r\n      }\r\n    },\r\n\r\n    formatParams(target) {\r\n      let data = this.$cloneDeep(target);\r\n      // 价格为统一为分\r\n      data.price = data.price * 100;\r\n      data.originalPrice = data.originalPrice * 100;\r\n      return data;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.operation {\r\n  position: fixed;\r\n  bottom: 0px;\r\n  right: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 60px;\r\n  width: 1612px;\r\n  box-shadow: 0 -3px 5px #eee;\r\n  background: #fff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=3a8ec6c8&scoped=true&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit.vue?vue&type=style&index=0&id=3a8ec6c8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a8ec6c8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}