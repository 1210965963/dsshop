(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/indent/list"],{"1f01":function(t,e,n){"use strict";var o=n("4b22"),i=n.n(o);i.a},"4b22":function(t,e,n){},"778c":function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("18f9");o(n("66fd"));var i=o(n("ed0c"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"8dd8":function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("2eee")),a=o(n("c973")),r=o(n("9523")),c=n("26cb"),s=o(n("f2c2"));function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={components:{uniLoadMore:function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n("25ed"))}.bind(null,n)).catch(n.oe)},empty:function(){n.e("components/empty").then(function(){return resolve(n("5a28"))}.bind(null,n)).catch(n.oe)}},data:function(){return{CustomBar:0,tabCurrentIndex:0,page:1,modalName:"",swiperTab:!1,loadingType:!1,list:[],navList:[{state:0,text:this.$t("good_indent.state.all")},{state:1,text:this.$t("good_indent.state.pay")},{state:2,text:this.$t("good_indent.state.deliver")},{state:3,text:this.$t("good_indent.state.take")},{state:5,text:this.$t("good_indent.state.accomplish")}]}},onLoad:function(t){t.state&&(this.tabCurrentIndex=t.state)},onShow:function(){t.setNavigationBarTitle({title:this.$t("indent.title")}),this.loginCheck(),this.loadData()},computed:{},methods:d(d({},(0,c.mapMutations)(["loginCheck"])),{},{loadData:function(){var e=arguments,n=this;return(0,a.default)(i.default.mark((function o(){var a,r,c;return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:"add",r=e.length>1?e[1]:void 0,"refresh"===a&&(n.page=1,n.list=[]),"add"!==a){o.next=9;break}if("nomore"!==n.loadingType){o.next=6;break}return o.abrupt("return");case 6:n.loadingType="loading",o.next=10;break;case 9:n.loadingType="more";case 10:return c=n,o.next=13,s.default.getList({limit:5,page:c.page,index:n.tabCurrentIndex,sort:"+created_at"},(function(t){c.list=c.list.concat(t.data),t.last_page>c.page?(c.page++,c.loadingType="more"):c.loadingType="nomore",c.list.forEach((function(t){switch(t.state){case 1:t.class="text-orange";break;case 2:t.class="text-red";break;case 3:t.class="text-green";break;case 4:t.class="text-brown";break}t.goods_list.forEach((function(t){t.good_sku&&(t.specification="",t.good_sku.product_sku.forEach((function(e){t.specification?t.specification+=e.value+";":t.specification=e.value+";"})),t.specification=t.specification.substr(0,t.specification.length-1))}))}))}));case 13:"refresh"===a&&(c.loading=!1,setTimeout((function(){c.loading=!0}),500),1==r?t.hideLoading():t.stopPullDownRefresh());case 14:case"end":return o.stop()}}),o)})))()},tabClick:function(t){this.tabCurrentIndex=t,this.loadData("refresh")},deleteOrder:function(e){var n=this;t.showModal({title:this.$t("common.hint"),content:this.$t("good_indent.affirm.delete"),success:function(o){o.confirm&&s.default.destroy(n.list[e].id,(function(o){n.list.splice(e,1),n.$api.msg(n.$t("common.success")),t.hideLoading()}))}})},goPay:function(e){t.navigateTo({url:"/pages/money/pay?id="+e.id})},cancelOrder:function(e){var n=this;t.showModal({title:this.$t("common.hint"),content:this.$t("good_indent.affirm.cancel"),success:function(t){t.confirm&&s.default.cancel(e.id,(function(t){n.$api.msg(n.$t("common.success")),n.refreshOderList()}))}})},goShowOrder:function(e){t.navigateTo({url:"/pages/indent/detail?id=".concat(e.id)})},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},confirmReceipt:function(e){var n=this;t.showModal({title:this.$t("common.hint"),content:this.$t("good_indent.affirm.receiving"),success:function(t){t.confirm&&s.default.receipt(e.id,(function(t){n.$api.msg(n.$t("common.success")),n.refreshOderList()}))}})},onPullDownRefresh:function(){this.loadData("refresh")},onReachBottom:function(){this.loadData()},refreshOderList:function(){this.loadData("refresh")}})};e.default=l}).call(this,n("543d")["default"])},b128:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={uniLoadMore:function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"25ed"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.$t("indent.common")),o=t.$t("indent.pieces_goods"),i=t.$t("indent.order_total"),a=t.$t("common.monetary_unit"),r=t.__map(t.list,(function(e,n){var o=t.__get_orig(e),i=t.__map(e.goods_list,(function(e,n){var o=t.__get_orig(e),i=t._f("smallImage")(e.img);return{$orig:o,f0:i}})),a=e.goods_list.length,r=t._f("1000")(e.total),c=1===e.state?t.$t("indent.cancel"):null,s=1===e.state?t.$t("indent.payment"):null,u=3===e.state?t.$t("indent.confirm_receipt"):null;return{$orig:o,l0:i,g0:a,f1:r,m4:c,m5:s,m6:u}}));t.$mp.data=Object.assign({},{$root:{m0:n,m1:o,m2:i,m3:a,l1:r}})},a=[]},b1bb:function(t,e,n){"use strict";n.r(e);var o=n("8dd8"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},ed0c:function(t,e,n){"use strict";n.r(e);var o=n("b128"),i=n("b1bb");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("1f01");var r=n("f0c5"),c=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=c.exports}},[["778c","common/runtime","common/vendor"]]]);