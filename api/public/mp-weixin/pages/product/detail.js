(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/detail"],{"36ed":function(e,t,n){"use strict";n.r(t);var i=n("3b7e"),o=n("6056");for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("8dcd");var s,c=n("f0c5"),a=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=a.exports},"3b7e":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.verify.comment?e.__map(e.commentList,(function(t,n){var i=e.__get_orig(t),o=t.comment.created_at.split(" ");return{$orig:i,g0:o}})):null);e.$mp.data=Object.assign({},{$root:{l0:n}})},r=[]},6056:function(e,t,n){"use strict";n.r(t);var i=n("f65b"),o=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},"75b4":function(e,t,n){"use strict";(function(e){n("18f9");i(n("66fd"));var t=i(n("36ed"));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"8dcd":function(e,t,n){"use strict";var i=n("9bec"),o=n.n(i);o.a},"9bec":function(e,t,n){},f65b:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=p(n("a34a")),o=p(n("1580")),r=(n("2f14"),p(n("2d6f"))),s=p(n("bb79")),c=n("b0ed"),a=n("ad8f"),u=n("2146"),f=n("a1dc"),l=p(n("e46e")),d=n("26cb");function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n,i,o,r,s){try{var c=e[r](s),a=c.value}catch(u){return void n(u)}c.done?t(a):Promise.resolve(a).then(i,o)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){v(r,i,o,s,c,"next",e)}function c(e){v(r,i,o,s,c,"throw",e)}s(void 0)}))}}var y=function(){Promise.all([n.e("common/vendor"),n.e("components/gaoyia-parse/parse")]).then(function(){return resolve(n("e6b2"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/share").then(function(){return resolve(n("d3e3"))}.bind(null,n)).catch(n.oe)},L=function(){Promise.all([n.e("common/vendor"),n.e("components/sku/index")]).then(function(){return resolve(n("3e46"))}.bind(null,n)).catch(n.oe)},k=function(){n.e("pages/coupon/components/index").then(function(){return resolve(n("8d6e"))}.bind(null,n)).catch(n.oe)},w=function(){n.e("pages/seckill/components/CountDownTime").then(function(){return resolve(n("4fa4"))}.bind(null,n)).catch(n.oe)},O={components:{share:b,sku:L,uParse:y,coupon:k,CountDownTime:w},data:function(){return{cartGood:{},id:"",specClass:"none",specificationDefaultDisplay:"",getList:{is_delete:0,is_show:1},inventoryFlag:!0,shoppingAttributes:[],favorite:!1,shareList:[],poster:"",resources_many:[],video:"",index:0,buy:!1,commentList:[],commentTotal:0,couponList:[],couponShow:!1,verify:{coupon:!1,comment:!1,seckill:!1},isSeckill:!1}},onLoad:function(e){var t=this;return _(i.default.mark((function n(){var o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o=e.id,t.id=o,t.getVerifyPlugin();case 3:case"end":return n.stop()}}),n)})))()},computed:m({},(0,d.mapState)(["hasLogin"])),onReady:function(t){this.videoContext=e.createVideoContext("myVideo")},methods:{getVerifyPlugin:function(){var e=this;(0,u.verifyPlugin)(["coupon","comment","seckill"],(function(t){e.verify=t,e.id&&(e.loadData(e.id),e.verify.comment&&e.goodEvaluate()),e.hasLogin&&e.verify.coupon&&e.getCoupon()}))},loadData:function(e){var t=this;return _(i.default.mark((function n(){var r;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t,n.next=3,o.default.detail(e,{},function(){var t=_(i.default.mark((function t(n){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.resources_many.length>0&&n.resources_many.forEach((function(e,t){-1!==e.depict.indexOf("_video")?(e.type="video",r.resources_many.unshift(e)):-1!==e.depict.indexOf("_poster")?r.poster=e.img:(e.type="img",r.resources_many.push(e))})),r.getList=n,!r.verify.seckill){t.next=5;break}return t.next=5,(0,f.detail)(e,{},(function(e){if(e){r.isSeckill=!0,r.getList.name=e.name,r.getList.abstract=e.abstract,r.getList.details=e.details,r.getList.state=e.state,r.getList.resources_many=e.resources_many,r.getList.seckill_time=e.time,r.getList.seckill=!0,r.getList.seckill_id=e.id,r.getList.price_show=e.price_show,r.getList.market_price_show=e.market_price_show,e.state?r.getList.seckillTime=((0,l.default)(e.end_time).valueOf()-(0,l.default)().valueOf())/1e3:r.getList.seckillTime=((0,l.default)(e.time).valueOf()-(0,l.default)().valueOf())/1e3;var t=JSON.parse(JSON.stringify(r.getList.good_sku)),i={};r.getList.good_sku=[],t.forEach((function(t){i=e.seckill_sku.find((function(e){return e.good_sku_id===t.id})),i&&(t.market_price=i.price/100,t.price=i.seckill_price/100,t.resources=i.resources,t.seckill_sku_id=i.id,t.inventory=i.residue_limit,1===e.is_purchase_number&&(r.getList.purchase_number=e.purchase_number),r.getList.good_sku.push(t))})),r.resources_many=[],n.resources_many.length>0&&n.resources_many.forEach((function(e,t){-1!==e.depict.indexOf("_video")?(e.type="video",r.resources_many.unshift(e)):-1!==e.depict.indexOf("_poster")?r.poster=e.img:(e.type="img",r.resources_many.push(e))})),r.$refs.sku._setData(r.getList.good_sku)}}));case 5:r.getList.good_sku.length<=0&&(r.inventoryFlag=!1),r.hasLogin&&r.browse();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:if(!r.hasLogin){n.next=6;break}return n.next=6,s.default.detail(e,(function(e){r.favorite=1===e}));case 6:case"end":return n.stop()}}),n)})))()},imgCtu:function(e){this.index=e.target.current},showVideo:function(){var e=this.resources_many[this.index];"video"===e.type&&(this.video=e.img)},closeVideo:function(){this.video=""},browse:function(){var e=this.getList;r.default.create(e,(function(e){}))},imgList:function(){var t=[];this.resources_many.forEach((function(e){"video"!==e.type&&t.push(e.img)})),e.previewImage({urls:t,longPressActions:{success:function(e){},fail:function(e){}}})},toggleSpec:function(e){var t=this;if(!this.hasLogin&&!0===e)return this.$api.msg("请先登录"),!1;"boolean"===typeof e&&(this.buy=e),"show"===this.specClass?(this.specClass="hide",setTimeout((function(){t.specClass="none"}),250)):"none"===this.specClass&&(this.specClass="show")},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){if(this.hasLogin){var e=this.getList;this.favorite?s.default.destroy(e.id,(function(e){})):s.default.create(e,(function(e){}))}this.favorite=!this.favorite},purchasePattern:function(e){this.specificationDefaultDisplay=e},stopPrevent:function(){},goodEvaluate:function(){var e=this;(0,c.good)({limit:2,page:1,good_id:this.id,sort:"-created_at"},(function(t){t.total>0&&(e.commentList=t.data,e.commentTotal=t.total)}))},changeShow:function(e){if(!this.hasLogin)return this.$api.msg("请先登录"),!1;this.couponShow=e},getCoupon:function(){var e=this;(0,a.getList)({},(function(t){e.couponList=[],t.data.forEach((function(t){var n={id:t.id,money:t.cost/100,title:t.explain,type:t.type,time:t.start_time.split(" ")[0].replace(/-/g,".")+"-"+t.end_time.split(" ")[0].replace(/-/g,".")};t.limit_get&&t.user_coupon_count>=t.limit_get?n.state="2":n.state="1",e.couponList.push(n)}))}))},endTime:function(){this.getVerifyPlugin()}}};t.default=O}).call(this,n("543d")["default"])}},[["75b4","common/runtime","common/vendor"]]]);