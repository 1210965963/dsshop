(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e9d8"],{"3qpi":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(a("gDS+")),i=a("qTU8");e.default={name:"Update",data:function(){return{loading:!0,formLoading:!1,is_pre:!1,pre:"",data:{state:0,version:"",new_version:"",body:"",zip:""}}},created:function(){this.getInfo()},methods:{getInfo:function(){sessionStorage.getItem("update_info")&&(this.data=JSON.parse(sessionStorage.getItem("update_info"))),this.loading=!1},getDetail:function(){var t=this;this.formLoading=!0,(0,i.detail)().then(function(e){t.data=e.data,sessionStorage.setItem("update_info",(0,n.default)(e.data)),t.formLoading=!1})},openBody:function(){this.$alert('<div style="white-space: pre-wrap;">'+this.data.body+"</div>","更新日志",{dangerouslyUseHTMLString:!0}).then(function(){}).catch(function(){})},handleEdit:function(t){var e=this;0===t&&(this.formLoading=!0,this.is_pre=!0),(0,i.edit)(t,this.data).then(function(t){var a=e.$refs.main;e.pre+=t.data.message,a.scrollTop=a.scrollHeight,2===t.data.state?e.$alert("更新成功",e.$t("hint.succeed"),{confirmButtonText:"确定",callback:function(){e.pre="",e.getDetail(),e.formLoading=!1,e.is_pre=!1}}):3===t.data.state?e.formLoading=!1:e.handleEdit(t.data.step)}).catch(function(){e.formLoading=!1})}}}},"6KQe":function(t,e,a){t.exports=a.p+"static/img/ver.0dc0006.svg"},"H+F2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"card",attrs:{shadow:"hover",header:"版本信息"}},[n("div",{staticClass:"tip",staticStyle:{"background-color":"#fff6f7","border-left":"5px solid #fe6c6f"}},[n("p",[t._v("更新之前请务必备份好数据和文件，以免超成不必要的损失！")]),t._v(" "),n("p",[t._v("如因网络等问题未完成更新的，可以刷新后重试")])]),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("img",{staticStyle:{height:"140px"},attrs:{src:a("6KQe")}}),t._v(" "),n("h2",{staticStyle:{"margin-top":"15px"}},[t._v("DSSHOP")]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("p",{staticStyle:{"margin-top":"5px"}},[t._v("当前版本："+t._s(t.data.version))]),t._v(" "),n("p",{staticStyle:{"margin-top":"5px"}},[t._v("最新版本："+t._s(t.data.new_version))]),t._v(" "),1===t.data.state?[n("p",{staticStyle:{"margin-top":"5px"}},[n("el-button",{attrs:{type:"primary",plain:"",round:""},on:{click:t.openBody}},[t._v("更新日志")])],1),t._v(" "),n("p",{staticStyle:{"margin-top":"5px"}},[n("el-button",{attrs:{loading:t.formLoading,round:"",type:"primary"},on:{click:function(e){t.handleEdit(0)}}},[t._v("一键更新")])],1),t._v(" "),t.is_pre?n("pre",{ref:"main",staticClass:"pre",domProps:{innerHTML:t._s(t.pre)}}):t._e()]:[n("el-button",{attrs:{loading:t.formLoading,round:"",type:"success"},on:{click:t.getDetail}},[t._v("检测更新")])]],2)])])],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},HFqb:function(t,e,a){},"KY/g":function(t,e,a){"use strict";a.r(e);var n=a("3qpi"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e.default=i.a},dUqi:function(t,e,a){"use strict";a.r(e);var n=a("H+F2"),i=a("KY/g");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("uBiB");var r=a("KHd+"),s=Object(r.a)(i.default,n.a,n.b,!1,null,"0e5a6a7a",null);s.options.__file="index.vue",e.default=s.exports},uBiB:function(t,e,a){"use strict";var n=a("HFqb");a.n(n).a}}]);