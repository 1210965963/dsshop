(window.webpackJsonp=window.webpackJsonp||[]).push([[5,4],{532:function(t,e,r){var content=r(539);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(15).default)("1b91cea2",content,!0,{sourceMap:!1})},534:function(t,e,r){"use strict";r.d(e,"f",(function(){return l})),r.d(e,"a",(function(){return c})),r.d(e,"d",(function(){return m})),r.d(e,"c",(function(){return f})),r.d(e,"e",(function(){return h})),r.d(e,"b",(function(){return v}));var n=r(6),o=r(22),d=r.n(o);function l(t){return Object(n.a)({url:"shipping",method:"GET",params:t})}function c(data){return data=d.a.parse(data),Object(n.a)({url:"shipping",method:"POST",data:data})}function m(data){return data=d.a.parse(data),Object(n.a)({url:"shipping/"+data.id,method:"POST",data:data})}function f(t){return Object(n.a)({url:"shipping/destroy/"+t,method:"POST"})}function h(t,data){return data=d.a.parse(data),Object(n.a)({url:"shipping/freight/"+t,method:"POST",data:data})}function v(data){return data=d.a.parse(data),Object(n.a)({url:"shipping/default/set",method:"POST",data:data})}},535:function(t,e,r){"use strict";r.r(e);var n=r(3),o=(r(38),r(18),r(534));e.default={name:"AddressList",props:{select:{type:Boolean,default:!1}},data:function(){var t=this;return{src:"https://apis.map.qq.com/tools/locpicker?search=1&type=1&key=lbs_qq_key&referer=myapp",restaurants:[],buttonLoading:!1,loading:!1,dialogTitle:this.$t("address.add"),centerDialogVisible:!1,list:[],ruleForm:{location:"",address:"",name:"",house:"",cellphone:"",latitude:"",longitude:""},rules:{name:[{required:!0,message:this.$t("hint.error.import",{attribute:this.$t("address.name")}),trigger:"blur"}],cellphone:[{required:!0,message:this.$t("hint.error.import",{attribute:this.$t("find_password.cellphone")}),trigger:"blur"},{validator:function(e,r,n){if(""===r)n(new Error(t.$t("hint.error.import",{attribute:t.$t("find_password.cellphone")})));else{/^(((13[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/.test(r)||n(new Error(t.$t("hint.error.wrong_format",{attribute:t.$t("find_password.cellphone")}))),n()}},trigger:"blur"}],house:[{required:!0,message:this.$t("hint.error.import",{attribute:this.$t("address.house")}),trigger:"blur"}]}}},watch:{},mounted:function(){this.getList(),window.addEventListener("message",this.handleSelect)},methods:{getList:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Object(o.f)({sort:"-defaults"}).then((function(e){t.loading=!1,t.list=e.data,t.list.forEach((function(e){e.defaults?(e.on=!0,t.$emit("selectedAddress",e)):e.on=!1}))})).catch((function(){t.loading=!1}));case 3:case"end":return e.stop()}}),e)})))()},switchAddress:function(t){this.select&&(this.list.forEach((function(t){t.on=!1})),t.on=!0,this.$emit("selectedAddress",t),this.$forceUpdate())},submitForm:function(){var t=this;this.$refs.ruleForm.validate((function(e){e&&(t.buttonLoading=!0,t.ruleForm.id?Object(o.d)(t.ruleForm).then((function(e){t.buttonLoading=!1,t.centerDialogVisible=!1,t.$refs.ruleForm.resetFields(),t.getList(),t.$message({message:t.$t("hint.succeed.win",{attribute:t.$t("common.amend")}),type:"success"})})).catch((function(){t.buttonLoading=!1})):(t.ruleForm.longitude||t.$message.error(t.$t("hint.error.selects",{attribute:t.$t("address.location")})),Object(o.a)(t.ruleForm).then((function(e){t.buttonLoading=!1,t.centerDialogVisible=!1,t.$refs.ruleForm.resetFields(),t.getList(),t.$message({message:t.$t("hint.succeed.win",{attribute:t.$t("common.add")}),type:"success"})})).catch((function(){t.buttonLoading=!1}))))}))},defaultAddress:function(t){var e=this;this.$confirm(this.$t("address.is_default"),this.$t("common.hint"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then((function(){e.buttonLoading=!0,Object(o.b)(t).then((function(t){e.buttonLoading=!1,e.getList(),e.$message({message:e.$t("common.success"),type:"success"})})).catch((function(){e.buttonLoading=!1}))})).catch((function(){}))},deleteAddress:function(t){var e=this;t.defaults?this.$message({message:this.$t("address.delete.confirm"),type:"error"}):this.$confirm(this.$t("address.delete.title"),this.$t("common.hint"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then((function(){e.buttonLoading=!0,Object(o.c)(t.id).then((function(t){e.buttonLoading=!1,e.getList(),e.$message({message:e.$t("hint.succeed.win",{attribute:e.$t("common.delete")}),type:"success"})})).catch((function(){e.buttonLoading=!1}))})).catch((function(){}))},updateAddress:function(t){t.id?(this.ruleForm=t,this.dialogTitle=this.$t("address.amend")):(this.ruleForm={location:"",address:"",name:"",house:"",cellphone:"",latitude:"",longitude:""},this.dialogTitle=this.$t("address.add")),this.centerDialogVisible=!0},handleSelect:function(t){var e=t.data;e&&"locationPicker"===e.module&&(this.ruleForm.location=e.poiname,this.ruleForm.address=e.poiaddress,this.ruleForm.longitude=e.latlng.lng,this.ruleForm.latitude=e.latlng.lat)}}}},537:function(t,e,r){"use strict";r.r(e);var n=r(535).default,o=(r(538),r(10)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"address-list"},[t._l(t.list,(function(e,n){return r("div",{key:n,staticClass:"address-item"},[r("div",{staticClass:"item-on",class:{on:e.on&&t.select},on:{click:function(r){return t.switchAddress(e)}}},[r("div",{staticClass:"address-info"},[r("div",{staticClass:"name"},[t._v("\n              "+t._s(e.name)+"\n              "),e.defaults?r("span",[t._v(t._s(t.$t("address.default")))]):t._e()]),t._v(" "),r("div",{staticClass:"cellphone"},[t._v(t._s(e.cellphone))]),t._v(" "),r("div",{staticClass:"address-con"},[t._v(t._s(e.location?e.location+"(":"")+t._s(e.address)+" "+t._s(e.house?")"+e.house:""))]),t._v(" "),r("div",{staticClass:"address-action"},[t.select?t._e():r("el-link",{attrs:{type:"danger",underline:!1},on:{click:function(r){return t.defaultAddress(e)}}},[t._v(t._s(t.$t("address.set_default")))]),t._v(" "),r("el-link",{attrs:{type:"danger",underline:!1},on:{click:function(r){return t.updateAddress(e)}}},[t._v(t._s(t.$t("common.amend")))]),t._v(" "),t.select?t._e():r("el-link",{attrs:{type:"danger",underline:!1},on:{click:function(r){return t.deleteAddress(e)}}},[t._v(t._s(t.$t("common.delete")))])],1)])])])})),t._v(" "),r("div",{staticClass:"address-item",on:{click:t.updateAddress}},[r("div",{staticClass:"item"},[r("div",{staticClass:"add-desc"},[t._m(0),t._v(" "),r("div",[t._v(t._s(t.$t("address.add_new")))])])])])],2),t._v(" "),r("el-dialog",{attrs:{title:t.dialogTitle,visible:t.centerDialogVisible,"close-on-click-modal":!1,width:"600px;height:500px;overflow-y: auto;"},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[r("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:t.$t("address.name"),prop:"name"}},[r("el-input",{attrs:{placeholder:t.$t("hint.error.import",{attribute:t.$t("address.name")}),clearable:"",maxlength:"20"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("find_password.cellphone"),prop:"cellphone"}},[r("el-input",{attrs:{placeholder:t.$t("hint.error.import",{attribute:t.$t("find_password.cellphone")}),clearable:"",maxlength:"11"},model:{value:t.ruleForm.cellphone,callback:function(e){t.$set(t.ruleForm,"cellphone",e)},expression:"ruleForm.cellphone"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("address.location"),prop:"location"}},[t.ruleForm.longitude?r("div",[t._v(t._s(t.ruleForm.location)+"("+t._s(t.ruleForm.address)+")")]):r("div",[t._v(t._s(t.$t("address.location.tip")))]),t._v(" "),t.ruleForm.longitude?r("iframe",{staticClass:"iframe",attrs:{height:"500",frameborder:"0",src:t.src+"&coord="+t.ruleForm.latitude+","+t.ruleForm.longitude}}):r("iframe",{staticClass:"iframe",attrs:{height:"500",frameborder:"0",src:t.src}})]),t._v(" "),r("el-form-item",{attrs:{label:t.$t("address.house"),prop:"house"}},[r("el-input",{attrs:{placeholder:t.$t("hint.error.import",{attribute:t.$t("address.house")}),clearable:"",maxlength:"80"},model:{value:t.ruleForm.house,callback:function(e){t.$set(t.ruleForm,"house",e)},expression:"ruleForm.house"}})],1)],1),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{loading:t.buttonLoading},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),r("el-button",{attrs:{loading:t.buttonLoading,type:"danger"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v(t._s(t.$t("common.confirm")))])],1)],1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"el-icon-circle-plus"})])}],!1,null,"64fb7058",null);e.default=component.exports},538:function(t,e,r){"use strict";r(532)},539:function(t,e,r){var n=r(14)(!1);n.push([t.i,".address-list[data-v-64fb7058]{display:flex;flex-wrap:wrap;align-content:center}.address-list .address-item[data-v-64fb7058]{width:25%;padding-right:10px;padding-bottom:10px}.address-list .address-item .item[data-v-64fb7058]{cursor:pointer;border:1px solid #e0e0e0;display:flex;justify-content:center;align-items:center;height:180px}.address-list .address-item .item .add-desc[data-v-64fb7058]{text-align:center;color:#b0b0b0}.address-list .address-item .item .add-desc i[data-v-64fb7058]{color:#e0e0e0;font-size:32px;margin-bottom:10px}.address-list .address-item .item:hover i[data-v-64fb7058]{color:#b0b0b0}.address-list .address-item .item-on[data-v-64fb7058]{cursor:pointer;border:1px solid #e0e0e0;display:flex;height:180px;padding:20px;position:relative}.address-list .address-item .item-on .address-info[data-v-64fb7058]{width:100%;font-size:14px;color:#757575}.address-list .address-item .item-on .address-info .name[data-v-64fb7058]{font-size:18px;margin-bottom:20px}.address-list .address-item .item-on .address-info .name span[data-v-64fb7058]{color:#fa524c;float:right;font-size:12px}.address-list .address-item .item-on .address-info .address-action[data-v-64fb7058]{position:absolute;bottom:20px;right:20px;display:none}.address-list .address-item .item-on:hover .address-action[data-v-64fb7058]{display:block}.address-list .address-item .item-on.on[data-v-64fb7058]{border:1px solid #fa524c}.iframe[data-v-64fb7058]{border:1px solid #dcdfe6}",""]),t.exports=n}}]);