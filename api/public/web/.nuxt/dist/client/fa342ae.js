(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{609:function(t,e,n){"use strict";n.r(e);n(16),n(53),n(108);var o=n(137),r=n(6),c=n(22),d=n.n(c);var l=n(567),m=n.n(l),h=n(568),$=n.n(h);e.default={components:{VueCountdown:m.a,VueQrcode:$.a},layout:"cart",middleware:"auth",head:function(){return{title:this.$t("money.title")+"-DSSHOP商城-轻量级易扩展低代码开源商城系统"}},data:function(){return{loading:!0,detail:!1,centerDialogVisible:!1,buttonLoading:!1,qrcode:"",timer:null,list:{}}},mounted:function(){$nuxt.$store.commit("setCartTitle",this.$t("money.title")),this.getList()},methods:{getList:function(){var t=this;Object(o.h)($nuxt.$route.query.id).then((function(e){1!==e.state&&(4===e.state?$nuxt.$router.replace({path:"/user/indent/detail",query:{id:$nuxt.$route.query.id}}):$nuxt.$router.replace("/money/success")),t.loading=!1,t.list=e})).catch((function(e){t.$message({message:t.$t("common.arguments"),type:"error"})}))},showDetail:function(){this.detail=!this.detail},payment:function(t){var data,e=this;this.buttonLoading=!0,1===t?(data={id:$nuxt.$route.query.id},data=d.a.parse(data),Object(r.a)({url:"balancePay",method:"POST",data:data})).then((function(t){e.buttonLoading=!1,$nuxt.$router.replace("/money/success")})):function(data){return data=d.a.parse(data),Object(r.a)({url:"unifiedPayment",method:"POST",data:data})}({id:$nuxt.$route.query.id,platform:t,trade_type:"NATIVE",type:"goodsIndent"}).then((function(t){e.centerDialogVisible=!0,e.qrcode=t.code_url,e.buttonLoading=!1,e.timer?(clearInterval(e.timer),e.timer=setInterval((function(){e.getList()}),5e3)):e.timer=setInterval((function(){e.getList()}),5e3)})).catch((function(t){e.$message({message:e.$t("money.error"),type:"error"}),e.buttonLoading=!1}))}},destroyed:function(){clearInterval(this.timer)}}}}]);