(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{562:function(t,n,e){"use strict";e.r(n);var o=e(25),c=e(7),r=(e(36),e(13),e(29),e(32),e(17),e(291),e(190),e(124));n.default={layout:"user",head:function(){return{title:"订单详情-个人中心"}},data:function(){return{loading:!0,buttonLoading:!1,total:0,indent:{total:0,good_code:[]},isType:!0,code_type:0}},mounted:function(){this.getDetail()},methods:{getDetail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if($nuxt.$route.query.id){n.next=4;break}return t.$message({message:"参数有误，请联系管理员",type:"error"}),$nuxt.$router.go(-1),n.abrupt("return",!1);case 4:return n.next=6,Promise.all([Object(r.e)($nuxt.$route.query.id)]).then((function(n){var e=Object(o.a)(n,1)[0];t.indent=e,t.total=0;var c=null;t.indent.goods_list.forEach((function(n){t.total+=n.price*n.number,n.good_sku&&(t.code_type=n.good_sku.code_type,c=null,n.good_sku.product_sku.forEach((function(t){c?c+=t.value+";":c=t.value+";"})),n.specification=c.substr(0,c.length-1)),2!==n.good.type&&3!==n.good.type||(t.isType=!1)})),t.total=Number(t.total.toFixed(2)),t.loading=!1})).catch((function(n){t.loading=!1}));case 6:case"end":return n.stop()}}),n)})))()},confirmReceipt:function(){var t=this;this.$confirm("是否确认收货？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){t.buttonLoading=!0,Object(r.j)(t.indent.id).then((function(n){t.buttonLoading=!1,t.$message({message:"操作成功",type:"success"}),t.getDetail()})).catch((function(){t.buttonLoading=!1}))})).catch((function(){}))},goBack:function(){$nuxt.$router.go(-1)},doCopy:function(t){var n=this;this.$copyText(t).then((function(t){n.$message({message:"复制成功",type:"success"})})).catch((function(t){console.log("失败")}))},goDownload:function(){var t=this;this.buttonLoading=!0,Object(r.f)(this.indent.id).then((function(t){window.open("http://dsshop.test/api/v1/app/indentDownload/"+t)})).finally((function(){t.buttonLoading=!1}))}}}}}]);