(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{791:function(t,e,n){"use strict";n.r(e);n(25),n(50),n(91);var r=n(124),o=n(7),c=n(19),d=n.n(c);var l=n(727),m=n.n(l),h=n(728),f=n.n(h);e.default={components:{VueCountdown:m.a,VueQrcode:f.a},layout:"cart",middleware:"auth",head:function(){return{title:"支付订单-DSSHOP商城-跨终端商城解决方案"}},data:function(){return{loading:!0,detail:!1,centerDialogVisible:!1,buttonLoading:!1,qrcode:"",timer:null,list:{}}},mounted:function(){$nuxt.$store.commit("setCartTitle","支付订单"),this.getList()},methods:{getList:function(){var t=this;Object(r.h)($nuxt.$route.query.id).then((function(e){1!==e.state&&(4===e.state?$nuxt.$router.replace({path:"/user/indent/detail",query:{id:$nuxt.$route.query.id}}):$nuxt.$router.replace("/money/success")),t.loading=!1,t.list=e})).catch((function(e){t.$message({message:"请求参数有误",type:"error"})}))},showDetail:function(){this.detail=!this.detail},payment:function(t){var data,e=this;this.buttonLoading=!0,1===t?(data={id:$nuxt.$route.query.id},data=d.a.parse(data),Object(o.a)({url:"balancePay",method:"POST",data:data})).then((function(t){e.buttonLoading=!1,$nuxt.$router.replace("/money/success")})):function(data){return data=d.a.parse(data),Object(o.a)({url:"unifiedPayment",method:"POST",data:data})}({id:$nuxt.$route.query.id,platform:t,trade_type:"NATIVE",type:"goodsIndent"}).then((function(t){e.centerDialogVisible=!0,e.qrcode=t.code_url,e.buttonLoading=!1,e.timer?(clearInterval(e.timer),e.timer=setInterval((function(){e.getList()}),5e3)):e.timer=setInterval((function(){e.getList()}),5e3)})).catch((function(t){e.$message({message:"支付配置有误，请检查",type:"error"})}))}},destroyed:function(){clearInterval(this.timer)}}}}]);