(window.webpackJsonp=window.webpackJsonp||[]).push([[46,47],{562:function(t,e,n){"use strict";n.r(e);var o=n(25),d=n(7),l=(n(36),n(13),n(29),n(32),n(17),n(291),n(190),n(124));e.default={layout:"user",head:function(){return{title:"订单详情-个人中心"}},data:function(){return{loading:!0,buttonLoading:!1,total:0,indent:{total:0,good_code:[]},isType:!0,code_type:0}},mounted:function(){this.getDetail()},methods:{getDetail:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($nuxt.$route.query.id){e.next=4;break}return t.$message({message:"参数有误，请联系管理员",type:"error"}),$nuxt.$router.go(-1),e.abrupt("return",!1);case 4:return e.next=6,Promise.all([Object(l.e)($nuxt.$route.query.id)]).then((function(e){var n=Object(o.a)(e,1)[0];t.indent=n,t.total=0;var d=null;t.indent.goods_list.forEach((function(e){t.total+=e.price*e.number,e.good_sku&&(t.code_type=e.good_sku.code_type,d=null,e.good_sku.product_sku.forEach((function(t){d?d+=t.value+";":d=t.value+";"})),e.specification=d.substr(0,d.length-1)),2!==e.good.type&&3!==e.good.type||(t.isType=!1)})),t.total=Number(t.total.toFixed(2)),t.loading=!1})).catch((function(e){t.loading=!1}));case 6:case"end":return e.stop()}}),e)})))()},confirmReceipt:function(){var t=this;this.$confirm("是否确认收货？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){t.buttonLoading=!0,Object(l.j)(t.indent.id).then((function(e){t.buttonLoading=!1,t.$message({message:"操作成功",type:"success"}),t.getDetail()})).catch((function(){t.buttonLoading=!1}))})).catch((function(){}))},goBack:function(){$nuxt.$router.go(-1)},doCopy:function(t){var e=this;this.$copyText(t).then((function(t){e.$message({message:"复制成功",type:"success"})})).catch((function(t){console.log("失败")}))},goDownload:function(){var t=this;this.buttonLoading=!0,Object(l.f)(this.indent.id).then((function(t){window.open("http://dsshop.test/api/v1/app/indentDownload/"+t)})).finally((function(){t.buttonLoading=!1}))}}}},563:function(t,e,n){var content=n(622);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("59390b36",content,!0,{sourceMap:!1})},621:function(t,e,n){"use strict";n(563)},622:function(t,e,n){var o=n(11)(!1);o.push([t.i,".specification[data-v-16ef97ab]{color:#999}.top[data-v-16ef97ab]{margin-top:20px}.right .li[data-v-16ef97ab],.top[data-v-16ef97ab]{display:flex;flex-direction:row;justify-content:space-between}.right .li[data-v-16ef97ab]{font-size:12px;color:#999;line-height:45px}.right .li .name[data-v-16ef97ab]{text-align:right;flex:1}.right .li .value[data-v-16ef97ab]{min-width:100px;text-align:right;color:#fa524c}.right .li .total[data-v-16ef97ab]{position:relative;top:-5px}.right .li .total span[data-v-16ef97ab]{font-size:30px}.address .min-title[data-v-16ef97ab]{margin-bottom:20px}.address .li[data-v-16ef97ab]{display:flex;line-height:25px;font-size:12px}.address .li .name[data-v-16ef97ab]{width:80px;text-align:right}.address .li .value[data-v-16ef97ab]{color:#999}.steps-box-time .steps[data-v-16ef97ab]{display:flex;font-size:12px;line-height:25px;margin-top:5px}.steps-box-time .steps div[data-v-16ef97ab]{flex:1;text-align:center}.steps-box .title[data-v-16ef97ab]{color:#fa524c;margin-bottom:10px}.steps-box .steps[data-v-16ef97ab]{display:flex;border-radius:5px;background-color:#e1e1e1;font-size:12px;line-height:25px}.steps-box .steps .on[data-v-16ef97ab]{background-color:#fa524c;color:#fff;border-radius:5px}.steps-box .steps div[data-v-16ef97ab]{flex:1}.steps-box .steps div .chunk[data-v-16ef97ab]{text-align:center}.code-box .min-title[data-v-16ef97ab]{line-height:45px}.code-box .code-list[data-v-16ef97ab]{font-size:12px}.code-box .code-list .li[data-v-16ef97ab]{display:flex;line-height:25px}.code-box .code-list .li .el-icon-copy-document[data-v-16ef97ab]{margin-left:10px;cursor:pointer}.code-box .code-list .li .name[data-v-16ef97ab]{margin-right:50px}.download[data-v-16ef97ab]{text-align:right}",""]),t.exports=o},677:function(t,e,n){"use strict";n.r(e);var o=n(562).default,d=(n(621),n(6)),component=Object(d.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("el-page-header",{attrs:{content:"订单详情"},on:{back:t.goBack}}),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"top"},[n("div",{staticClass:"order-number"},[t._v("订单号："+t._s(t.indent.identification))]),t._v(" "),n("div",{staticClass:"operation"},[1===t.indent.state?n("div",{staticStyle:{"margin-bottom":"5px"}},[n("el-button",{attrs:{loading:t.buttonLoading,size:"mini"}},[t._v("取消订单")])],1):t._e(),t._v(" "),1===t.indent.state?n("NuxtLink",{attrs:{to:{path:"/money/pay",query:{id:t.indent.id}}}},[n("el-button",{attrs:{loading:t.buttonLoading,size:"mini",type:"danger"}},[t._v("立即付款")])],1):t._e(),t._v(" "),3===t.indent.state?n("div",[n("el-button",{attrs:{loading:t.buttonLoading,size:"mini",type:"danger"},on:{click:function(e){return t.confirmReceipt()}}},[t._v("确认收货")])],1):t._e()],1)]),t._v(" "),n("el-divider"),t._v(" "),n("div",{staticClass:"steps-box"},[n("div",{staticClass:"title"},[t._v(t._s(t.indent.state_show))]),t._v(" "),n("div",{staticClass:"steps"},[n("div",{class:{on:t.indent.created_at}},[n("div",{staticClass:"chunk"},[t._v("下单")])]),t._v(" "),n("div",{class:{on:t.indent.pay_time}},[n("div",{staticClass:"chunk"},[t._v("付款")]),t._v(" "),n("div",{staticClass:"name"})]),t._v(" "),t.isType?n("div",{class:{on:t.indent.shipping_time}},[n("div",{staticClass:"chunk"},[t._v("配货")]),t._v(" "),n("div",{staticClass:"name"})]):t._e(),t._v(" "),n("div",{class:{on:5===t.indent.state||11===t.indent.state}},[n("div",{staticClass:"chunk"},[t._v("交易成功")]),t._v(" "),n("div",{staticClass:"name"})])])]),t._v(" "),n("div",{staticClass:"steps-box-time"},[n("div",{staticClass:"steps"},[n("div",[n("div",{staticClass:"chunk"},[t._v(t._s(t.indent.created_at))])]),t._v(" "),n("div",[n("div",{staticClass:"chunk"},[t._v(t._s(t.indent.pay_time))])]),t._v(" "),t.isType?n("div",[n("div",{staticClass:"chunk"},[t._v(t._s(t.indent.shipping_time))])]):t._e(),t._v(" "),n("div",[n("div",{staticClass:"chunk"},[t._v(t._s(5===t.indent.state?t.indent.confirm_time:""))])])])]),t._v(" "),n("el-table",{ref:"table",staticClass:"table",attrs:{data:t.indent.goods_list}},[n("el-table-column",{attrs:{align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("NuxtLink",{attrs:{to:{path:"/product/detail/"+e.row.good_id}}},[n("el-image",{staticClass:"image",attrs:{src:t._f("smallImage")(e.row.img,80),fit:"cover"}})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("NuxtLink",{attrs:{to:{path:"/product/detail/"+e.row.good_id}}},[n("p",[t._v(t._s(e.row.name))]),t._v(" "),n("p",{staticClass:"specification"},[t._v(t._s(e.row.specification))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"单价",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("thousands")(e.row.price))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"数量",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.number)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"小计",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("thousands")(e.row.price*e.row.number))+"\n        ")]}}])})],1),t._v(" "),n("el-divider"),t._v(" "),t.indent.odd?[n("div",{staticClass:"address"},[n("div",{staticClass:"min-title"},[t._v("物流信息")]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("物流公司：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.dhl.name))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("运单号：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.odd))])])]),t._v(" "),n("el-divider")]:t._e(),t._v(" "),t.indent.good_location?[n("div",{staticClass:"address"},[n("div",{staticClass:"min-title"},[t._v("收货信息")]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("姓名：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.good_location.name))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("联系电话：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.good_location.cellphone))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("收货地址：")]),t._v(" "),n("div",{staticClass:"value"},[t._v("\n            "+t._s(t.indent.good_location.location)+"\n            "),t.indent.good_location.address?n("span",[t._v("("+t._s(t.indent.good_location.address)+")")]):t._e(),t._v("\n            "+t._s(t.indent.good_location.house)+"\n          ")])])]),t._v(" "),n("el-divider")]:t._e(),t._v(" "),t.indent.refund_time?n("div",[n("div",{staticClass:"address"},[n("div",{staticClass:"min-title"},[t._v("退款方式")]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("退款方式：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.refund_way))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("退款时间：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.refund_time))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("退款金额：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.refund_money))])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("退款原因：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.refund_reason))])])]),t._v(" "),n("el-divider")],1):t._e(),t._v(" "),t.indent.good_code.length?n("div",{staticClass:"code-box"},[n("div",{staticClass:"min-title"},[t._v(t._s(t.code_type?"网盘":"卡密"))]),t._v(" "),n("div",{staticClass:"code-list"},t._l(t.indent.good_code,(function(e,o){return n("div",{key:o,staticClass:"li"},[e.name?n("div",{staticClass:"name"},[t._v(t._s(t.code_type?"网盘地址":"卡号")+"："+t._s(e.name)),n("span",{staticClass:"el-icon-copy-document",on:{click:function(n){return t.doCopy(e.name)}}})]):t._e(),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.code_type?"提取码":"卡密")+"："+t._s(e.code)),n("span",{staticClass:"el-icon-copy-document",on:{click:function(n){return t.doCopy(e.code)}}})])])})),0),t._v(" "),n("el-divider")],1):t._e(),t._v(" "),n("div",{staticClass:"address"},[n("div",{staticClass:"min-title"},[t._v("其它")]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("备注：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.indent.remark?t.indent.remark:"无"))])])]),t._v(" "),n("el-divider"),t._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("商品总价：")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t._f("thousands")(t.total))+"元")])]),t._v(" "),t.indent.coupon_money?n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("优惠金额：")]),t._v(" "),n("div",{staticClass:"value"},[t._v("-"+t._s(t._f("thousands")(t.indent.coupon_money/100))+"元")])]):t._e(),t._v(" "),t.indent.integral_draw_log?t._e():n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("运费：")]),t._v(" "),t.indent.carriage>0?n("div",{staticClass:"value"},[t._v(t._s(t._f("thousands")(t.indent.carriage))+"元")]):n("div",{staticClass:"value"},[t._v("免运费")])]),t._v(" "),n("div",{staticClass:"li"},[n("div",{staticClass:"name"},[t._v("应付金额：")]),t._v(" "),n("div",{staticClass:"value total"},[n("span",[t._v(t._s(t._f("thousands")(t.indent.total)))]),t._v("元")])])]),t._v(" "),t.indent.download?n("div",{staticClass:"download"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.buttonLoading,expression:"buttonLoading"}],attrs:{type:"danger"},on:{click:t.goDownload}},[t._v("下载")])],1):t._e()],2)],1)}),[],!1,null,"16ef97ab",null);e.default=component.exports}}]);