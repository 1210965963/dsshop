(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{582:function(e,t,n){"use strict";n.r(t);var r=n(7),o=n(3),c=(n(38),n(49),n(13),n(24),n(26),n(108),n(207)),d=n(206);t.default={layout:"user",head:function(){return{title:"".concat(this.$t("user.cellphone"),"-").concat(this.$t("header.top.personal_center"))}},data:function(){var e=this;return{buttonLoading:!1,loading:!0,disabled:!1,codename:this.$t("find_password.get_code"),seconds:"",cellphone:"",unit:"",user:{},ruleForm:{cellphone:"",code:"",state:2},rules:{cellphone:[{required:!0,message:this.$t("hint.error.import",{attribute:this.$t("cellphone.new")}),trigger:"blur"},{validator:function(t,n,r){if(""===n)r(new Error(e.$t("hint.error.import",{attribute:e.$t("find_password.cellphone")})));else{/^(((13[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/.test(n)||r(new Error(e.$t("hint.error.wrong_format",{attribute:e.$t("find_password.cellphone")}))),r()}},trigger:"blur"}],code:[{required:!0,message:this.$t("hint.error.import",{attribute:this.$t("find_password.verification_code")}),trigger:"blur"}]}}},mounted:function(){this.getUser()},methods:{getUser:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(c.c)(e.listQuery)]).then((function(t){var n=Object(r.a)(t,1)[0];e.user=n,e.cellphone=JSON.parse(JSON.stringify(n.cellphone)),e.loading=!1})).catch((function(t){e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},getCode:function(){var e=this,t=this;this.buttonLoading=!0,Object(d.b)(this.ruleForm).then((function(n){e.seconds=60,e.codename="",e.unit="s",e.disabled=!0,e.buttonLoading=!1,e.timer=setInterval((function(){t.seconds=t.seconds-1,0===t.seconds&&(clearInterval(t.timer),t.seconds="",t.codename=this.$t("find_password.get_code"),t.unit="",t.codeDisabled=!1)}),1e3),n.code&&(t.ruleForm.code=n.code)})).catch((function(){e.buttonLoading=!1}))},submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.loading=!0,e.buttonLoading=!0,Object(d.c)(e.ruleForm).then((function(t){e.loading=!1,e.buttonLoading=!1,e.getUser(),e.$refs.ruleForm.resetFields(),e.$message({message:e.$t("common.success"),type:"success"})})).catch((function(){e.loading=!1,e.buttonLoading=!1})))}))},resetForm:function(e){this.$refs[e].resetFields()}}}}}]);