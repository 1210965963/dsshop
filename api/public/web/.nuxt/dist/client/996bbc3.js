(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{497:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return f}));var r=n(8),o=n(18),c=n.n(o);function d(){return Object(r.a)({url:"user",method:"GET"})}function l(data){return data=c.a.parse(data),Object(r.a)({url:"user",method:"POST",data:data})}function f(data){return data=c.a.parse(data),Object(r.a)({url:"cancel",method:"POST",data:data})}},552:function(e,t,n){"use strict";n.r(t);var r=n(25),o=n(7),c=(n(36),n(13),n(29),n(32),n(91),n(497)),d=n(187);t.default={layout:"user",head:function(){return{title:"修改手机号-个人中心"}},data:function(){return{buttonLoading:!1,loading:!0,disabled:!1,codename:"获取验证码",seconds:"",cellphone:"",unit:"",user:{},ruleForm:{cellphone:"",code:"",state:2},rules:{cellphone:[{required:!0,message:"请输入新手机号",trigger:"blur"},{validator:function(e,t,n){if(""===t)n(new Error("请输入手机号"));else{/^(((13[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/.test(t)||n(new Error("手机号格式有误")),n()}},trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},mounted:function(){this.getUser()},methods:{getUser:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(c.b)(e.listQuery)]).then((function(t){var n=Object(r.a)(t,1)[0];e.user=n,e.cellphone=JSON.parse(JSON.stringify(n.cellphone)),e.loading=!1})).catch((function(t){e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},getCode:function(){var e=this,t=this;this.buttonLoading=!0,Object(d.b)(this.ruleForm).then((function(n){e.seconds=60,e.codename="",e.unit="s",e.disabled=!0,e.buttonLoading=!1,e.timer=setInterval((function(){t.seconds=t.seconds-1,0===t.seconds&&(clearInterval(t.timer),t.seconds="",t.codename="获取验证码",t.unit="",t.codeDisabled=!1)}),1e3),n.code&&(t.ruleForm.code=n.code)})).catch((function(){e.buttonLoading=!1}))},submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.loading=!0,e.buttonLoading=!0,Object(d.c)(e.ruleForm).then((function(t){e.loading=!1,e.buttonLoading=!1,e.getUser(),e.$refs.ruleForm.resetFields(),e.$message({message:"修改成功",type:"success"})})).catch((function(){e.loading=!1,e.buttonLoading=!1})))}))},resetForm:function(e){this.$refs[e].resetFields()}}}}}]);