{"version":3,"file":"pages/user/js/portal.js","sources":["webpack:///./api/user.js","webpack:///./api/browse.js","webpack:///./pages/user/js/portal.js"],"sourcesContent":["import request from '@/plugins/request'\r\nimport Qs from 'qs'\r\nexport function detail() {\r\n  return request({\r\n    url: 'user',\r\n    method: 'GET'\r\n  })\r\n}\r\nexport function edit(data) {\r\n  data = Qs.parse(data)\r\n  return request({\r\n    url: 'user',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\nexport function cancel(data) {\r\n  data = Qs.parse(data)\r\n  return request({\r\n    url: 'cancel',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n","import request from '@/plugins/request'\r\nexport function getList(query) {\r\n  return request({\r\n    url: 'browse',\r\n    method: 'GET',\r\n    params: query\r\n  })\r\n}\r\n","import {getList as getBrowseList} from '@/api/browse'\nimport {detail as getUserDetail} from '@/api/user'\nimport {quantity} from '@/api/goodIndent'\nimport {verifyPlugin} from '@/api/plugin'\nexport default {\n  layout: 'user',\n  head () {\n    return {\n      title: '个人中心',\n    }\n  },\n  async asyncData (ctx) {\n    try {\n      let [ verifyPluginData ] = await Promise.all([\n        verifyPlugin(['integral','comment']),\n      ]);\n      return {\n        isIntegral: verifyPluginData.integral,\n        isComment: verifyPluginData.comment\n      }\n    } catch(err) {\n      ctx.$errorHandler(err)\n    }\n  },\n  data() {\n    return {\n      isIntegral: false,\n      isComment: false,\n      loading: true,\n      user:{},\n      browseList: [],\n      quantity: {\n        all: 0,\n        obligation: 0,\n        waitdeliver: 0,\n        waitforreceiving: 0\n      }\n    }\n  },\n  mounted() {\n    this.getList()\n  },\n  methods: {\n    async getList(){\n      await Promise.all([\n        getBrowseList({\n          limit: 7,\n          sort: '-updated_at'\n        }),\n        getUserDetail(),\n        quantity()\n      ]).then(([browseData, userData, quantityData]) => {\n        this.browseList = browseData.data;\n        this.user = userData;\n        this.quantity = quantityData;\n        this.loading = false\n      }).catch((error) => {\n        this.loading = false\n      })\n    }\n  }\n}\n"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AANA;AAaA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAFA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAtCA;;;;A","sourceRoot":""}