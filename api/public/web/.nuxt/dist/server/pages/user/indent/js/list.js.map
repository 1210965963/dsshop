{"version":3,"file":"pages/user/indent/js/list.js","sources":["webpack:///./pages/user/indent/js/list.js"],"sourcesContent":["import { getList, cancel, destroy, receipt } from '@/api/goodIndent'\nexport default {\n  layout: 'user',\n  head () {\n    return {\n      title: '我的订单-个人中心',\n    }\n  },\n  data() {\n    return {\n      tableLoading: false,\n      buttonLoading: false,\n      loading: false,\n      goodIndentList: [],\n      total: 0,\n      listQuery: {\n        limit: 10,\n        page: 1,\n        index: '0',\n        sort: '-created_at',\n      }\n    }\n  },\n  async asyncData (ctx) {\n    try {\n    } catch(err) {\n      ctx.$errorHandler(err)\n    }\n  },\n  mounted() {\n    if($nuxt.$route.query.index){\n      this.listQuery.index = $nuxt.$route.query.index\n    }\n    this.getList()\n  },\n  methods: {\n    async getList(){\n      this.loading = true;\n      await Promise.all([\n        getList(this.listQuery)\n      ]).then(([goodIndent]) => {\n        this.goodIndentList = goodIndent.data;\n        goodIndent.data.forEach(item=>{\n          item.goods_list.forEach(items=>{\n            if(items.good_sku){\n              items.good_sku.product_sku.forEach(item2=>{\n                if(items.specification){\n                  items.specification+= item2.value + ';'\n                }else{\n                  items.specification = item2.value + ';'\n                }\n              })\n              items.specification = items.specification.substr(0,items.specification.length-1)\n            }\n          })\n        })\n        this.total = goodIndent.total;\n        this.loading = false\n      }).catch((error) => {\n        this.loading = false\n      })\n    },\n    getReloadList(){\n      this.listQuery.page = 1;\n      this.getList()\n    },\n    //取消订单\n    cancelOrder(item){\n      this.$confirm('是否确认取消订单？', '提示', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.buttonLoading = true\n        cancel(item.id).then(response => {\n          this.buttonLoading = false;\n          this.$message({\n            message: '取消成功',\n            type: 'success'\n          });\n          this.getReloadList();\n        }).catch(() => {\n          this.buttonLoading = false\n        })\n      }).catch(() => {\n      })\n    },\n    // 删除订单\n    deleteOrder(item){\n      this.$confirm('是否确认删除订单？', '提示', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.buttonLoading = true\n        destroy(item.id).then(response => {\n          this.buttonLoading = false;\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n          this.getReloadList();\n        }).catch(() => {\n          this.buttonLoading = false\n        })\n      }).catch(() => {\n      })\n    },\n    // 确认收货\n    confirmReceipt(item){\n      this.$confirm('是否确认收货？', '提示', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.buttonLoading = true\n        receipt(item.id).then(response => {\n          this.buttonLoading = false;\n          this.$message({\n            message: '操作成功',\n            type: 'success'\n          });\n          this.getReloadList();\n        }).catch(() => {\n          this.buttonLoading = false\n        })\n      }).catch(() => {\n      })\n    }\n  }\n}\n"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AANA;AAaA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AA9FA;AAlCA;;;;A","sourceRoot":""}