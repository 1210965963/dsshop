{"version":3,"file":"pages/user/indent/js/detail.js","sources":["webpack:///./pages/user/indent/js/detail.js"],"sourcesContent":["import {detail, receipt, download} from '@/api/goodIndent'\nexport default {\n  layout: 'user',\n  head () {\n    return {\n      title: '订单详情-个人中心',\n    }\n  },\n  data() {\n    return {\n      loading: true,\n      buttonLoading: false,\n      total: 0,\n      indent:{\n        total: 0,\n        good_code: []\n      },\n      isType: true,\n      code_type: 0\n    }\n  },\n  mounted() {\n    this.getDetail()\n  },\n  methods: {\n    async getDetail(){\n      if(!$nuxt.$route.query.id){\n        this.$message({\n          message: '参数有误，请联系管理员',\n          type: 'error'\n        });\n        $nuxt.$router.go(-1);\n        return false\n      }\n      await Promise.all([\n        detail($nuxt.$route.query.id)\n      ]).then(([indentData]) => {\n        this.indent = indentData;\n        this.total = 0;\n        let specification = null;\n        this.indent.goods_list.forEach(item => {\n          this.total += item.price * item.number;\n          if(item.good_sku){\n            this.code_type = item.good_sku.code_type\n            specification = null;\n            item.good_sku.product_sku.forEach(item2 => {\n              if (specification) {\n                specification += item2.value + ';';\n              } else {\n                specification = item2.value + ';';\n              }\n            });\n            item.specification = specification.substr(0, specification.length - 1);\n          }\n          if (item.good.type === 2 || item.good.type === 3) {\n            this.isType = false\n          }\n        });\n        this.total = Number(this.total.toFixed(2));\n        this.loading = false\n      }).catch((error) => {\n        this.loading = false\n      })\n    },\n    // 确认收货\n    confirmReceipt(){\n      this.$confirm('是否确认收货？', '提示', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.buttonLoading = true\n        receipt(this.indent.id).then(response => {\n          this.buttonLoading = false;\n          this.$message({\n            message: '操作成功',\n            type: 'success'\n          });\n          this.getDetail();\n        }).catch(() => {\n          this.buttonLoading = false\n        })\n      }).catch(() => {\n      })\n    },\n    goBack() {\n      $nuxt.$router.go(-1)\n    },\n    doCopy (item) {\n      this.$copyText(item).then(message => {\n        this.$message({\n          message: '复制成功',\n          type: 'success'\n        });\n      }).catch(err => {\n        console.log('失败')\n      })\n    },\n    // 下载文件\n    goDownload() {\n      this.buttonLoading = true\n      download(this.indent.id).then(response => {\n        window.open(process.env.API_URL + 'indentDownload/'+ response)\n      }).finally(() => {\n        this.buttonLoading = false\n      })\n    }\n  }\n}\n"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AATA;AAWA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnFA;AAvBA;;;;A","sourceRoot":""}