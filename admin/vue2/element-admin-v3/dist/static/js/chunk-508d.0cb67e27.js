(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-508d"],{"5l4f":function(e,t,i){"use strict";i.r(t);var r=i("BnA5"),a=i("5n4l");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);var l=i("KHd+"),s=Object(l.a)(a.default,r.a,r.b,!1,null,null,null);s.options.__file="Detail.vue",t.default=s.exports},"5n4l":function(e,t,i){"use strict";i.r(t);var r=i("cMR2"),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);t.default=a.a},"6g3Z":function(e,t,i){"use strict";i.r(t);var r=i("M3qR"),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);t.default=a.a},"6tNa":function(e,t,i){tinymce.PluginManager.add("axupimgs",function(e,t){window.axupimgs={};var i="./static/tinymce"+"/plugins/axupimgs/upfiles.html";axupimgs.images_upload_handler=e.getParam("images_upload_handler",void 0,"function"),axupimgs.images_upload_base_path=e.getParam("images_upload_base_path","","string"),axupimgs.axupimgs_filetype=e.getParam("axupimgs_filetype",".png,.gif,.jpg,.jpeg","string"),axupimgs.res=[];var r=function(){return e.windowManager.openUrl({title:"Ax多图片上传",size:"large",url:i,buttons:[{type:"cancel",text:"Close"},{type:"custom",text:"插入图片",name:"save",primary:!0}],onAction:function(t,i){switch(i.name){case"save":var r="",a=axupimgs.res,n=a.length;if(n<1)return alert("请选上传文件"),!1;for(let e=0;e<n;e++)a[e].url&&(r+='<img src="'+a[e].url+'" />');e.insertContent(r),axupimgs.res=[],t.close()}}})};return e.ui.registry.getAll().icons.axupimgs||e.ui.registry.addIcon("axupimgs",'<svg viewBox="0 0 1280 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M1126.2,779.8V87.6c0-24-22.6-86.9-83.5-86.9H83.5C14.7,0.7,0,63.7,0,87.7v692c0,36.2,29.2,89.7,83.5,89.7l959.3-1.3c51.7,0,83.5-42.5,83.5-88.3zm-1044,4V86.3h961.6V783.7H82.2v0.1z" fill="#ff0000"/><path d="M603,461.6L521.1,366.3,313,629.8,227.2,546.8,102.4,716.8H972.8v-170L768.2,235.2,603.1,461.6zM284.6,358.4a105.4,105.4,0,0,0,73.5-30c19.5-19.1,30.3-45,30.2-71.8,0-56.8-45.9-103-102.4-103-56.6,0-102.4,46.1-102.4,103C183.4,313.5,228,358.4,284.6,358.4z" fill="#ff0000"/><path d="M1197.7,153.6l-0.3,669.3s13.5,113.9-67.4,113.9H153.6c0,24.1,23.9,87.2,83.5,87.2h959.3c58.3,0,83.6-49.5,83.6-89.9V240.8c-0.1-41.8-44.9-87.2-82.3-87.2z" fill="#ff0000"/></svg>'),e.ui.registry.addButton("axupimgs",{icon:"axupimgs",tooltip:"Ax多图片上传",onAction:function(){r()}}),e.ui.registry.addMenuItem("axupimgs",{icon:"axupimgs",text:"图片批量上传...",onAction:function(){r()}}),{getMetadata:function(){return{name:"Ax多图片上传",url:"axupimgs.php"}}}})},"7d6x":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(i("MpT8"));t.default=r.default},"9D+X":function(e,t,i){"use strict";i.r(t);var r=i("7d6x"),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);t.default=a.a},BnA5:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"createPost-container",staticStyle:{"padding-top":"40px"}},[i("el-steps",{staticStyle:{"margin-bottom":"20px"},attrs:{active:e.active,"align-center":"","finish-status":"success"}},[i("el-step",{attrs:{title:"选择秒杀商品"}}),e._v(" "),i("el-step",{attrs:{title:"填写基础信息"}})],1),e._v(" "),i("el-form",{ref:"ruleForm",staticClass:"ruleForm",staticStyle:{"padding-left":"200px","padding-right":"20px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[0===e.active?i("div",[i("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"选择商品",prop:"good_id"}},[e.ruleForm.img?i("el-image",{staticStyle:{width:"100px",height:"100px",cursor:"pointer"},attrs:{src:e.ruleForm.img,fit:"scale-down"},on:{click:e.add}}):i("el-button",{staticClass:"button",on:{click:e.add}},[e._v("选择")])],1),e._v(" "),e.dialog.save?i("save-dialog",{ref:"saveDialog",on:{success:e.handleSuccess,closed:function(t){e.dialog.save=!1}}}):e._e(),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1):1===e.active?i("div",[i("el-form-item",{attrs:{label:"主图",prop:"img"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-progress":e.handleProgress,action:e.actionurl,headers:e.imgHeaders,data:e.imgMasterData}},[e.imgProgress?i("span",[i("el-progress",{staticClass:"progress-img",attrs:{percentage:e.imgProgressPercent,type:"circle"}})],1):i("span",[e.ruleForm.img?i("el-image",{staticClass:"avatar",attrs:{src:e.ruleForm.img,fit:"scale-down"}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)]),e._v(" "),i("div",{staticClass:"el-upload__tip"},[e._v("每张不能大于2M")])],1),e._v(" "),i("el-form-item",{attrs:{label:"图片列表",prop:"resource"}},[i("el-upload",{attrs:{limit:5,action:e.actionurl,headers:e.imgHeaders,"on-success":e.handleAvatarSuccessList,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUploadList,data:e.imgData,"file-list":e.ruleForm.imgList,multiple:"","list-type":"picture-card"}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),e._v(" "),i("div",{staticClass:"el-upload__tip"},[e._v("最多可上传5张，每张不能大于2M")])],1),e._v(" "),i("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"商品名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"60",placeholder:"请输入商品名称",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),i("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"秒杀活动简介",prop:"abstract"}},[i("el-input",{attrs:{rows:2,type:"textarea",maxlength:"160",placeholder:"请输入简介",clearable:""},model:{value:e.ruleForm.abstract,callback:function(t){e.$set(e.ruleForm,"abstract",t)},expression:"ruleForm.abstract"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"活动时间",prop:"times"}},[i("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH"},model:{value:e.ruleForm.times,callback:function(t){e.$set(e.ruleForm,"times",t)},expression:"ruleForm.times"}}),e._v(" "),i("p",[e._v("活动开始时间请设置以下时间段：0点、2点、4点、6点、8点、10点、12点、14点、16点、18点、20点、22点")]),e._v(" "),i("p",[e._v("活动结束请自行设置，一般推荐设置为开始时间后2个小时")])],1),e._v(" "),i("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"减库存方式",prop:"is_inventory"}},[i("el-radio-group",{attrs:{placeholder:"请选择减库存方式"},model:{value:e.ruleForm.is_inventory,callback:function(t){e.$set(e.ruleForm,"is_inventory",t)},expression:"ruleForm.is_inventory"}},[i("el-radio",{attrs:{label:0}},[e._v("拍下减库存")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("付款减库存")])],1)],1),e._v(" "),i("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"是否限制购买数",prop:"is_purchase_number"}},[i("el-radio-group",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.is_purchase_number,callback:function(t){e.$set(e.ruleForm,"is_purchase_number",t)},expression:"ruleForm.is_purchase_number"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),e._v(" "),1===e.ruleForm.is_purchase_number?i("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"购买数量",prop:"is_purchase_number"}},[i("el-input",{attrs:{maxlength:"11",placeholder:"请输入购买数量",clearable:""},model:{value:e.ruleForm.purchase_number,callback:function(t){e.$set(e.ruleForm,"purchase_number",t)},expression:"ruleForm.purchase_number"}}),e._v(" "),i("p",[e._v("限制每次可购买数量")])],1):e._e(),e._v(" "),i("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"是否上架",prop:"is_show"}},[i("el-radio-group",{attrs:{placeholder:"请选择是否上架"},model:{value:e.ruleForm.is_show,callback:function(t){e.$set(e.ruleForm,"is_show",t)},expression:"ruleForm.is_show"}},[i("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"产品参数"}},[i("el-table",{key:e.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.ruleForm.seckill_sku,height:"400","row-key":"id",border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{"reserve-selection":!0,type:"selection",width:"55",fixed:"left"}}),e._v(" "),e._l(e.ruleForm.seckill_sku[0].product_sku,function(t,r){return i("el-table-column",{key:r,attrs:{label:t.key,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.product_sku[r].value)+"\n            ")]}}])})}),e._v(" "),i("el-table-column",{attrs:{label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("avatar-image",{attrs:{file:t.row.img,width:60,height:60},on:{getFile:function(i){return e.getFile(i,t.$index)}}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"秒杀价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{clearable:""},model:{value:t.row.seckill_price,callback:function(i){e.$set(t.row,"seckill_price",i)},expression:"scope.row.seckill_price"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"成本价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.cost_price))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"原价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"库存",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.inventory))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"限量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{clearable:""},model:{value:t.row.limit,callback:function(i){e.$set(t.row,"limit",i)},expression:"scope.row.limit"}})]}}])})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"详情",prop:"details"}},[i("tinymce",{ref:"editor",attrs:{url:e.actionurl,header:e.imgHeaders},model:{value:e.ruleForm.details,callback:function(t){e.$set(e.ruleForm,"details",t)},expression:"ruleForm.details"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{disabled:!!e.id},on:{click:function(t){e.active=0}}},[e._v("上一步")]),e._v(" "),i("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.create():e.edit()}}},[e._v("提交")])],1)],1):e._e()])],1)},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},CPme:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(e){return(0,r.default)({url:"seckill",method:"GET",params:e})},t.create=function(e){return e=a.default.parse(e),(0,r.default)({url:"seckill",method:"POST",data:e})},t.edit=function(e){return e=a.default.parse(e),(0,r.default)({url:"seckill/"+e.id,method:"POST",data:e})},t.detail=function(e){return(0,r.default)({url:"seckill/"+e,method:"GET"})},t.destroy=function(e,t){return t=a.default.parse(t),(0,r.default)({url:"seckill/destroy/"+e,method:"POST",data:t})};var r=n(i("t3Un")),a=n(i("Qyje"));function n(e){return e&&e.__esModule?e:{default:e}}},CyJc:function(e,t,i){"use strict";var r=i("XVEj");i.n(r).a},DTqD:function(e,t,i){},"F+r9":function(e,t,i){"use strict";i.r(t);var r=i("Grgt"),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);t.default=a.a},Grgt:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("Wkq7"),a=function(e){return e&&e.__esModule?e:{default:e}}(i("Mz3J"));t.default={components:{Pagination:a.default},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{formLoading:!1,listLoading:!1,multipleSelection:[],tableKey:0,total:0,visible:!1,list:[],listQuery:{page:1,limit:10,sort:"+id"}}},created:function(){},methods:{open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";this.mode=e,this.visible=!0,this.getList()},sortChange:function(e){var t=e.prop,i=e.order;this.listQuery.sort="ascending"===i?"+"+t:"-"+t,this.handleFilter()},getList:function(){var e=this;this.listLoading=!0,(0,r.getList)(this.listQuery).then(function(t){e.list=t.data.data,e.total=t.data.total,e.listLoading=!1})},handleCheckAllChange:function(){this.$refs.multipleTable.toggleAllSelection()},hasChange:function(e){var t=this;(0,r.detail)(e.id).then(function(e){t.$emit("success",e.data.goods),t.visible=!1})},handleFilter:function(){this.listQuery.page=1,this.getList()}}}},JxI4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(i("5WJX"));i("RsPH");var a=n(i("ynI1"));function n(e){return e&&e.__esModule?e:{default:e}}i("DWi2"),i("Tqh3"),i("Oupb"),i("B9FH"),i("hOyB"),i("lDS1"),i("ZNhe"),i("MVQK"),i("Qjfq"),i("Cp0W"),i("6tNa"),t.default={name:"Tinymce",components:{Editor:a.default},props:{url:{default:"",type:String},accept:{default:"image/jpeg, image/png, image/gif",type:String},maxSize:{default:2097152,type:Number},value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"lists image media table link wordcount code fullscreen preview axupimgs"},toolbar:{type:[String,Array],default:"axupimgs media lists table link | undo redo |  formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent  | removeformat code fullscreen image preview"},header:{type:[String,Object],default:""}},data:function(){var e=this;return{init:{language_url:"./static/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"./static/tinymce/skins/ui/oxide",content_css:"./static/tinymce/skins/content/default/content.css",height:300,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,images_upload_handler:function(t,i,r){if(t.blob().size>e.maxSize&&r("文件体积过大"),e.accept.indexOf(t.blob().type)>=0){var a=new XMLHttpRequest,n=new FormData,l=e;a.withCredentials=!1,a.open("POST",l.url),a.setRequestHeader("Authorization",l.header.Authorization),a.onload=function(){if(200!==a.status)return l.$emit("on-upload-fail"),void r("上传失败: "+JSON.parse(a.response).message);i(a.responseText)},n.append("file",t.blob()),n.append("type",1),n.append("size",e.maxSize),a.send(n)}else r("图片格式错误")}},myValue:this.value}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit("input",e)}},mounted:function(){r.default.init({})},methods:{onClick:function(e){this.$emit("onClick",e,r.default)},clear:function(){this.myValue=""}}}},LGSU:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{staticClass:"avatar-uploader",style:{height:e.height+"px",width:e.width+"px"},attrs:{action:e.url,data:e.imgData,headers:e.imgHeaders,"show-file-list":!1,"on-success":e.handleSuccessList,"before-upload":e.beforeUploadList,"on-error":e.handleError}},[e.file?[1===e.imgData.type?i("el-image",{attrs:{src:e.file,fit:"cover"}}):i("i",{staticClass:"el-icon-folder avatar-uploader-icon",style:{height:e.height+"px",width:e.width+"px"}})]:i("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:{height:e.height+"px",width:e.width+"px"}})],2)],1)},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},Lcw6:function(e,t,i){"use strict";var r=i("qULk");i.n(r).a},M3qR:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("Y5bG");t.default={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&(0,r.scrollTo)(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&(0,r.scrollTo)(0,800)}}}},MpT8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("X4fA");t.default={name:"AvatarImage",props:{imgData:{type:Object,default:function(){return{type:1,size:2097152,specification:[80,150]}}},format:{type:Array,default:function(){return["image/jpeg","image/gif","image/png","image/bmp"]}},height:{type:Number,default:160},width:{type:Number,default:160},file:{type:String,default:""}},data:function(){return{url:"http://dsshop.test/api/v1/admin/uploadPictures",imgHeaders:{Authorization:(0,r.getToken)("token_type")+" "+(0,r.getToken)("access_token")}}},watch:{},mounted:function(){},methods:{handleSuccessList:function(e,t){this.$emit("getFile",t)},beforeUploadList:function(e){var t=e.size<this.imgData.size;return-1===this.format.indexOf(e.type)?(this.$message.error("请上传正确的文件格式"),!1):(t||this.$message.error("上传文件大小不能超过 "+e.size/1024/1024+"MB!"),t)},handleError:function(e){this.$message.error(JSON.parse(e.message).message)}}}},Mz3J:function(e,t,i){"use strict";i.r(t);var r=i("cJ0Q"),a=i("6g3Z");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i("Lcw6");var l=i("KHd+"),s=Object(l.a)(a.default,r.a,r.b,!1,null,"331ed7d4",null);s.options.__file="index.vue",t.default=s.exports},OhFh:function(e,t,i){"use strict";i.r(t);var r=i("leqy"),a=i("F+r9");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i("zxnf");var l=i("KHd+"),s=Object(l.a)(a.default,r.a,r.b,!1,null,null,null);s.options.__file="Good.vue",t.default=s.exports},Wkq7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(e){return(0,r.default)({url:"good",method:"GET",params:e})},t.create=function(e){return e=a.default.parse(e),(0,r.default)({url:"good",method:"POST",data:e})},t.edit=function(e){return e=a.default.parse(e),(0,r.default)({url:"good/"+e.id,method:"POST",data:e})},t.destroy=function(e,t){return t=a.default.parse(t),(0,r.default)({url:"good/destroy/"+e,method:"POST",data:t})},t.detail=function(e){return(0,r.default)({url:"good/"+e,method:"GET"})},t.state=function(e,t){return t=a.default.parse(t),(0,r.default)({url:"good/state/"+e,method:"POST",data:t})},t.specification=function(e){return(0,r.default)({url:"good/specification/"+e,method:"GET"})};var r=n(i("t3Un")),a=n(i("Qyje"));function n(e){return e&&e.__esModule?e:{default:e}}},XVEj:function(e,t,i){},Y5bG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrollTo=function(e,t,i){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,n=e-a,l=0;t=void 0===t?500:t,function e(){l+=20;var s=Math.easeInOutQuad(l,a,n,t);!function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(s),l<t?r(e):i&&"function"==typeof i&&i()}()},Math.easeInOutQuad=function(e,t,i,r){return(e/=r/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}},alm3:function(e,t,i){"use strict";i.r(t);var r=i("rqW4"),a=i("v1P2");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);var l=i("KHd+"),s=Object(l.a)(a.default,r.a,r.b,!1,null,null,null);s.options.__file="index.vue",t.default=s.exports},cJ0Q:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},cMR2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(i("erA5"));t.default=r.default},erA5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(i("gDS+")),a=i("CPme"),n=u(i("OhFh")),l=i("X4fA"),s=u(i("o5wi")),o=u(i("alm3"));function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"SeckillDetail",components:{SaveDialog:n.default,AvatarImage:s.default,tinymce:o.default},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,dialog:{save:!1},actionurl:"http://dsshop.test/api/v1/admin/uploadPictures",imgHeaders:{Authorization:"Bearer "+(0,l.getToken)("access_token")},imgMasterData:{type:1,size:2097152,specification:[80,150,200,250,300,350]},multipleSelection:[],imgData:{type:1,size:2097152},formLoading:!1,loading:!1,id:0,tableKey:0,ruleForm:{times:[],good_id:0,img:"",name:"",imgList:[],seckill_sku:[],abstract:"",details:"",is_inventory:0,is_show:1,is_purchase_number:0,purchase_number:""},dialogStatus:"create",imgProgress:!1,imgProgressPercent:0,rules:{img:[{required:!0,message:"请上传主图",trigger:"change"}],times:[{required:!0,message:"请选择活动时间",trigger:"change"}],name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],abstract:[{required:!0,message:"请输入简介",trigger:"blur"}],details:[{required:!0,message:"请输入详情",trigger:"blur"}],is_inventory:[{required:!0,message:"请选择减库存方式",trigger:"change"}],is_show:[{required:!0,message:"请选择是否上架",trigger:"change"}]}}},created:function(){this.isEdit&&(this.id=this.$route.query.id,this.dialogStatus="update",this.getList())},methods:{add:function(){var e=this;this.dialog.save=!0,this.$nextTick(function(){e.$refs.saveDialog.open()})},getList:function(){var e=this;this.loading=!0,(0,a.detail)(this.id).then(function(t){e.ruleForm=t.data,e.ruleForm.imgList=[],t.data.resources_many.forEach(function(t){"seckill_zimg"===t.depict?(e.ruleForm.img=t.img,e.ruleForm.img_id=t.id):(t.url=t.img,t.response=t.img,e.ruleForm.imgList.push(t))});var i=JSON.parse((0,r.default)(t.data.seckill_sku));e.ruleForm.seckill_sku=e.ruleForm.good_sku,e.ruleForm.seckill_sku.forEach(function(e){var t=i.find(function(t){return t.good_sku_id===e.id});t?(e.seckill_price=t.seckill_price,e.good_sku_id=t.good_sku_id,e.limit=t.limit,e.residue_limit=t.residue_limit,e.img=t.resources?t.resources.img:"",e.img_id=t.resources?t.resources.id:"",e.seckill_sku_id=t.id):(e.seckill_price=e.price,e.good_sku_id=e.id,e.limit=0,e.seckill_sku_id=0,e.img=e.resources?e.resources.img:"",e.img_id=e.resources?e.resources.id:"")}),e.$nextTick(function(){e.ruleForm.seckill_sku.forEach(function(t){i.find(function(e){return e.good_sku_id===t.id})&&e.$refs.multipleTable.toggleRowSelection(t)})}),e.ruleForm.times=[e.ruleForm.time,e.ruleForm.end_time],delete e.ruleForm.resources_many,delete e.ruleForm.good_sku,e.ruleForm=JSON.parse((0,r.default)(e.ruleForm)),e.active=1,e.loading=!1})},nextStep:function(){if(!this.ruleForm.img)return this.$message.error("请选择商品"),this.formLoading=!1,!1;this.active=1},create:function(){var e=this;if(this.formLoading=!0,0===this.multipleSelection.length)return this.$message.error("请选择产品参数"),this.formLoading=!1,!1;for(var t=0;t<this.multipleSelection.length;t++)if(this.multipleSelection[t].limit<=0)return this.$message.error("限量不能少于0"),this.formLoading=!1,!1;var i=this.ruleForm;i.seckill_sku=this.multipleSelection,this.$refs.ruleForm.validate(function(t){t?(0,a.create)(i).then(function(){e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.creatingSuccessful"),type:"success",duration:2e3}),e.formLoading=!1,setTimeout(e.$router.back(-1),2e3)}).catch(function(){e.formLoading=!1}):e.formLoading=!1})},edit:function(){var e=this;this.formLoading=!0;var t=this.ruleForm;t.seckill_sku=this.multipleSelection,this.$refs.ruleForm.validate(function(i){i?(0,a.edit)(t).then(function(){e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.updateSuccessful"),type:"success",duration:2e3}),e.formLoading=!1,setTimeout(e.$router.back(-1),2e3)}).catch(function(){e.formLoading=!1}):e.formLoading=!1})},handleSuccess:function(e){this.ruleForm.good_id=e.id,this.ruleForm.img=e.img,this.ruleForm.name=e.name,this.ruleForm.imgList=e.imgList,this.ruleForm.seckill_sku=e.good_sku,this.ruleForm.details=e.details,this.ruleForm.seckill_sku.forEach(function(e){e.seckill_price=e.price,e.good_sku_id=e.id,e.limit=0,e.seckill_sku_id=0}),this.ruleForm=JSON.parse((0,r.default)(this.ruleForm))},handleAvatarSuccess:function(e,t){this.ruleForm.img=t.response,this.imgProgress=!1,this.imgProgressPercent=0},handleProgress:function(e,t){this.imgProgressPercent=e.percent},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):(t||this.$message.error("上传头像图片大小不能超过 2MB!"),this.imgProgress=!0,t)},beforeAvatarUploadList:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):(t||this.$message.error("上传头像图片大小不能超过 2MB!"),t)},handleAvatarSuccessList:function(e,t,i){this.ruleForm.imgList=i,this.imgProgress=!1,this.imgProgressPercent=0},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){this.ruleForm.imgList=t},getFile:function(e,t){this.ruleForm.seckill_sku[t].img=e.response},handleSelectionChange:function(e){this.multipleSelection=e}}}},"gDS+":function(e,t,i){e.exports={default:i("t/pG"),__esModule:!0}},leqy:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.visible,title:"商品选取"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.listQuery}},[i("el-form-item",{attrs:{label:"关键字"}},[i("el-input",{attrs:{placeholder:"商品标题/商品货号",clearable:""},on:{input:e.handleFilter},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,height:"400","row-key":"id",border:"",fit:"","highlight-current-row":""},on:{"sort-change":e.sortChange}},[i("el-table-column",{attrs:{label:"编号",sortable:"custom",prop:"id",fixed:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{attrs:{label:t.row.id},on:{change:function(i){e.hasChange(t.row)}}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e._f("smallImage")(t.row.resources.img,150),"preview-src-list":[t.row.resources.img]}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"drawing"},[i("div",{staticClass:"right"},[i("div",[e._v(e._s(t.row.name))]),e._v(" "),t.row.price_show.length>1?i("div",[e._v("¥ "+e._s(e._f("1000")(t.row.price_show[0]))+" - "+e._s(e._f("1000")(t.row.price_show[1])))]):i("div",[e._v("¥ "+e._s(e._f("1000")(t.row.price_show[0])))])])])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"分类",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.category?t.row.category.name:"无"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"货号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.number))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"库存",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.inventory_show))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"状态",sortable:"custom",prop:"is_show",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.putaway_show))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"上架时间",sortable:"custom",prop:"time",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.time?t.row.time:"未发布"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"更新时间",sortable:"custom",prop:"updated_at",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.updated_at))])]}}])})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],staticClass:"pagination-operation"},[i("pagination",{staticClass:"pagination",attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){e.$set(e.listQuery,"page",t)},"update:limit":function(t){e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1)],1)],1)},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},o5wi:function(e,t,i){"use strict";i.r(t);var r=i("LGSU"),a=i("9D+X");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i("CyJc");var l=i("KHd+"),s=Object(l.a)(a.default,r.a,r.b,!1,null,"aeb3b832",null);s.options.__file="AvatarImage.vue",t.default=s.exports},qULk:function(e,t,i){},rqW4:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce-box"},[i("editor",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},"t/pG":function(e,t,i){var r=i("VSTI"),a=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},v1P2:function(e,t,i){"use strict";i.r(t);var r=i("JxI4"),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);t.default=a.a},zxnf:function(e,t,i){"use strict";var r=i("DTqD");i.n(r).a}}]);