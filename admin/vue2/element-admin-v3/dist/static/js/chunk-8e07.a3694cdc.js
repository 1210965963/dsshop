(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8e07"],{"2O1b":function(e,t,r){"use strict";r.r(t);var i=r("oIP7"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t.default=a.a},"6g3Z":function(e,t,r){"use strict";r.r(t);var i=r("M3qR"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t.default=a.a},"6tNa":function(e,t,r){tinymce.PluginManager.add("axupimgs",function(e,t){window.axupimgs={};var r="./static/tinymce"+"/plugins/axupimgs/upfiles.html";axupimgs.images_upload_handler=e.getParam("images_upload_handler",void 0,"function"),axupimgs.images_upload_base_path=e.getParam("images_upload_base_path","","string"),axupimgs.axupimgs_filetype=e.getParam("axupimgs_filetype",".png,.gif,.jpg,.jpeg","string"),axupimgs.res=[];var i=function(){return e.windowManager.openUrl({title:"Ax多图片上传",size:"large",url:r,buttons:[{type:"cancel",text:"Close"},{type:"custom",text:"插入图片",name:"save",primary:!0}],onAction:function(t,r){switch(r.name){case"save":var i="",a=axupimgs.res,o=a.length;if(o<1)return alert("请选上传文件"),!1;for(let e=0;e<o;e++)a[e].url&&(i+='<img src="'+a[e].url+'" />');e.insertContent(i),axupimgs.res=[],t.close()}}})};return e.ui.registry.getAll().icons.axupimgs||e.ui.registry.addIcon("axupimgs",'<svg viewBox="0 0 1280 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M1126.2,779.8V87.6c0-24-22.6-86.9-83.5-86.9H83.5C14.7,0.7,0,63.7,0,87.7v692c0,36.2,29.2,89.7,83.5,89.7l959.3-1.3c51.7,0,83.5-42.5,83.5-88.3zm-1044,4V86.3h961.6V783.7H82.2v0.1z" fill="#ff0000"/><path d="M603,461.6L521.1,366.3,313,629.8,227.2,546.8,102.4,716.8H972.8v-170L768.2,235.2,603.1,461.6zM284.6,358.4a105.4,105.4,0,0,0,73.5-30c19.5-19.1,30.3-45,30.2-71.8,0-56.8-45.9-103-102.4-103-56.6,0-102.4,46.1-102.4,103C183.4,313.5,228,358.4,284.6,358.4z" fill="#ff0000"/><path d="M1197.7,153.6l-0.3,669.3s13.5,113.9-67.4,113.9H153.6c0,24.1,23.9,87.2,83.5,87.2h959.3c58.3,0,83.6-49.5,83.6-89.9V240.8c-0.1-41.8-44.9-87.2-82.3-87.2z" fill="#ff0000"/></svg>'),e.ui.registry.addButton("axupimgs",{icon:"axupimgs",tooltip:"Ax多图片上传",onAction:function(){i()}}),e.ui.registry.addMenuItem("axupimgs",{icon:"axupimgs",text:"图片批量上传...",onAction:function(){i()}}),{getMetadata:function(){return{name:"Ax多图片上传",url:"axupimgs.php"}}}})},"7d6x":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r("MpT8"));t.default=i.default},"9D+X":function(e,t,r){"use strict";r.r(t);var i=r("7d6x"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t.default=a.a},C08a:function(e,t,r){},CyJc:function(e,t,r){"use strict";var i=r("XVEj");r.n(i).a},D8LS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(r("gDS+")),a=r("EphD"),o=u(r("yA02")),n=r("X4fA"),s=u(r("o5wi")),l=u(r("alm3"));function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"GroupPurchaseDetail",components:{SaveDialog:o.default,AvatarImage:s.default,tinymce:l.default},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,dialog:{save:!1},actionurl:"http://dsshop.test/api/v1/admin/uploadPictures",imgHeaders:{Authorization:"Bearer "+(0,n.getToken)("access_token")},imgMasterData:{type:1,size:2097152,specification:[80,150,200,250,300,350]},multipleSelection:[],imgData:{type:1,size:2097152},formLoading:!1,loading:!1,id:0,tableKey:0,ruleForm:{times:[],good_id:0,img:"",name:"",imgList:[],group_purchase_sku:[],abstract:"",details:"",number:2,number_max:4,aging:24,is_show:1,is_purchase_number:0,purchase_number:"",sort:5,is_recommend:0},dialogStatus:"create",imgProgress:!1,imgProgressPercent:0,rules:{img:[{required:!0,message:"请上传主图",trigger:"change"}],times:[{required:!0,message:"请选择活动时间",trigger:"change"}],name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],abstract:[{required:!0,message:"请输入简介",trigger:"blur"}],details:[{required:!0,message:"请输入详情",trigger:"blur"}],is_show:[{required:!0,message:"请选择是否上架",trigger:"change"}],purchase_number:[{required:!0,message:"请输入购买数量",trigger:"blur"}],number:[{required:!0,message:"请输入拼团人数",trigger:"blur"}],aging:[{required:!0,message:"请输入拼团时效",trigger:"blur"}],state:[{required:!0,message:"请选择拼团状态",trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],is_recommend:[{required:!0,message:"请选择是否推荐",trigger:"change"}]}}},created:function(){this.isEdit&&(this.id=this.$route.query.id,this.dialogStatus="update",this.getList())},methods:{add:function(){var e=this;this.dialog.save=!0,this.$nextTick(function(){e.$refs.saveDialog.open()})},getList:function(){var e=this;this.loading=!0,(0,a.detail)(this.id).then(function(t){e.ruleForm=t.data,e.ruleForm.imgList=[],t.data.resources_many.forEach(function(t){"group_purchase_zimg"===t.depict?(e.ruleForm.img=t.img,e.ruleForm.img_id=t.id):(t.url=t.img,t.response=t.img,e.ruleForm.imgList.push(t))});var r=JSON.parse((0,i.default)(t.data.group_purchase_sku));e.ruleForm.group_purchase_sku=e.ruleForm.good_sku,e.ruleForm.group_purchase_sku.forEach(function(e){var t=r.find(function(t){return t.good_sku_id===e.id});t?(e.group_purchase_price=t.group_purchase_price,e.good_sku_id=t.good_sku_id,e.limit=t.limit,e.residue_limit=t.residue_limit,e.img=t.resources?t.resources.img:"",e.img_id=t.resources?t.resources.id:"",e.group_purchase_sku_id=t.id):(e.group_purchase_price=e.price,e.good_sku_id=e.id,e.limit=0,e.group_purchase_sku_id=0,e.img=e.resources?e.resources.img:"",e.img_id=e.resources?e.resources.id:"")}),e.$nextTick(function(){e.ruleForm.group_purchase_sku.forEach(function(t){r.find(function(e){return e.good_sku_id===t.id})&&e.$refs.multipleTable.toggleRowSelection(t)})}),e.ruleForm.times=[e.ruleForm.time,e.ruleForm.end_time],delete e.ruleForm.resources_many,delete e.ruleForm.good_sku,e.ruleForm=JSON.parse((0,i.default)(e.ruleForm)),e.active=1,e.loading=!1})},nextStep:function(){if(!this.ruleForm.img)return this.$message.error("请选择商品"),this.formLoading=!1,!1;this.active=1},create:function(){var e=this;if(this.formLoading=!0,0===this.multipleSelection.length)return this.$message.error("请选择产品参数"),this.formLoading=!1,!1;for(var t=0;t<this.multipleSelection.length;t++){if(this.multipleSelection[t].limit<=0)return this.$message.error("限量不能少于0"),this.formLoading=!1,!1;if(this.multipleSelection[t].limit>this.multipleSelection[t].inventory)return this.$message.error("限量不能超过库存"),this.formLoading=!1,!1}var r=this.ruleForm;r.group_purchase_sku=this.multipleSelection,this.$refs.ruleForm.validate(function(t){t?(0,a.create)(r).then(function(){e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.creatingSuccessful"),type:"success",duration:2e3}),e.formLoading=!1,setTimeout(e.$router.back(-1),2e3)}).catch(function(){e.formLoading=!1}):e.formLoading=!1})},edit:function(){var e=this;if(this.formLoading=!0,0===this.multipleSelection.length)return this.$message.error("请选择产品参数"),this.formLoading=!1,!1;for(var t=0;t<this.multipleSelection.length;t++){if(this.multipleSelection[t].limit<=0)return this.$message.error("限量不能少于0"),this.formLoading=!1,!1;if(this.multipleSelection[t].limit>this.multipleSelection[t].inventory)return this.$message.error("限量不能超过库存"),this.formLoading=!1,!1}var r=this.ruleForm;r.group_purchase_sku=this.multipleSelection,this.$refs.ruleForm.validate(function(t){t?(0,a.edit)(r).then(function(){e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.updateSuccessful"),type:"success",duration:2e3}),e.formLoading=!1,setTimeout(e.$router.back(-1),2e3)}).catch(function(){e.formLoading=!1}):e.formLoading=!1})},handleSuccess:function(e){this.ruleForm.good_id=e.id,this.ruleForm.img=e.img,this.ruleForm.name=e.name,this.ruleForm.imgList=e.imgList,this.ruleForm.group_purchase_sku=e.good_sku,this.ruleForm.details=e.details,this.ruleForm.group_purchase_sku.forEach(function(e){e.group_purchase_price=e.price,e.good_sku_id=e.id,e.limit=0,e.group_purchase_sku_id=0}),this.ruleForm=JSON.parse((0,i.default)(this.ruleForm))},handleAvatarSuccess:function(e,t){this.ruleForm.img=t.response,this.imgProgress=!1,this.imgProgressPercent=0},handleProgress:function(e,t){this.imgProgressPercent=e.percent},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):(t||this.$message.error("上传头像图片大小不能超过 2MB!"),this.imgProgress=!0,t)},beforeAvatarUploadList:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):(t||this.$message.error("上传头像图片大小不能超过 2MB!"),t)},handleAvatarSuccessList:function(e,t,r){this.ruleForm.imgList=r,this.imgProgress=!1,this.imgProgressPercent=0},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){this.ruleForm.imgList=t},getFile:function(e,t){this.ruleForm.group_purchase_sku[t].img=e.response},handleSelectionChange:function(e){this.multipleSelection=e}}}},EphD:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(e){return(0,i.default)({url:"groupPurchase",method:"GET",params:e})},t.create=function(e){return e=a.default.parse(e),(0,i.default)({url:"groupPurchase",method:"POST",data:e})},t.edit=function(e){return e=a.default.parse(e),(0,i.default)({url:"groupPurchase/"+e.id,method:"POST",data:e})},t.detail=function(e){return(0,i.default)({url:"groupPurchase/"+e,method:"GET"})},t.destroy=function(e,t){return t=a.default.parse(t),(0,i.default)({url:"groupPurchase/destroy/"+e,method:"POST",data:t})},t.info=function(e){return(0,i.default)({url:"groupPurchaseInfo/"+e,method:"GET"})};var i=o(r("t3Un")),a=o(r("Qyje"));function o(e){return e&&e.__esModule?e:{default:e}}},JJXq:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"createPost-container",staticStyle:{"padding-top":"40px"}},[r("el-steps",{staticStyle:{"margin-bottom":"20px"},attrs:{active:e.active,"align-center":"","finish-status":"success"}},[r("el-step",{attrs:{title:"选择拼团商品"}}),e._v(" "),r("el-step",{attrs:{title:"填写基础信息"}})],1),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"ruleForm",staticStyle:{"padding-left":"200px","padding-right":"20px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[0===e.active?r("div",[r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"选择商品",prop:"good_id"}},[e.ruleForm.img?r("el-image",{staticStyle:{width:"100px",height:"100px",cursor:"pointer"},attrs:{src:e.ruleForm.img,fit:"scale-down"},on:{click:e.add}}):r("el-button",{staticClass:"button",on:{click:e.add}},[e._v("选择")])],1),e._v(" "),e.dialog.save?r("save-dialog",{ref:"saveDialog",on:{success:e.handleSuccess,closed:function(t){e.dialog.save=!1}}}):e._e(),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1):1===e.active?r("div",[r("el-form-item",{attrs:{label:"主图",prop:"img"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-progress":e.handleProgress,action:e.actionurl,headers:e.imgHeaders,data:e.imgMasterData}},[e.imgProgress?r("span",[r("el-progress",{staticClass:"progress-img",attrs:{percentage:e.imgProgressPercent,type:"circle"}})],1):r("span",[e.ruleForm.img?r("el-image",{staticClass:"avatar",attrs:{src:e.ruleForm.img,fit:"scale-down"}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)]),e._v(" "),r("div",{staticClass:"el-upload__tip"},[e._v("每张不能大于2M")])],1),e._v(" "),r("el-form-item",{attrs:{label:"图片列表",prop:"resource"}},[r("el-upload",{attrs:{limit:5,action:e.actionurl,headers:e.imgHeaders,"on-success":e.handleAvatarSuccessList,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUploadList,data:e.imgData,"file-list":e.ruleForm.imgList,multiple:"","list-type":"picture-card"}},[r("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),e._v(" "),r("div",{staticClass:"el-upload__tip"},[e._v("最多可上传5张，每张不能大于2M")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"商品名称",prop:"name"}},[r("el-input",{attrs:{maxlength:"60",placeholder:"请输入商品名称",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"拼团活动简介",prop:"abstract"}},[r("el-input",{attrs:{rows:2,type:"textarea",maxlength:"160",placeholder:"请输入简介",clearable:""},model:{value:e.ruleForm.abstract,callback:function(t){e.$set(e.ruleForm,"abstract",t)},expression:"ruleForm.abstract"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"拼团时间",prop:"times"}},[r("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH"},model:{value:e.ruleForm.times,callback:function(t){e.$set(e.ruleForm,"times",t)},expression:"ruleForm.times"}}),e._v(" "),r("p",[e._v("设置活动开启结束时间，用户可以在设置时间内发起参与拼团")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"拼团人数",prop:"number"}},[r("el-input",{attrs:{maxlength:"11",placeholder:"请输入拼团人数",clearable:""},model:{value:e.ruleForm.number,callback:function(t){e.$set(e.ruleForm,"number",t)},expression:"ruleForm.number"}}),e._v(" "),r("p",[e._v("单次拼团需要参与的用户数")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"最大拼团人数",prop:"number_max"}},[r("el-input",{attrs:{maxlength:"11",placeholder:"请输入最大拼团人数",clearable:""},model:{value:e.ruleForm.number_max,callback:function(t){e.$set(e.ruleForm,"number_max",t)},expression:"ruleForm.number_max"}}),e._v(" "),r("p",[e._v("假如拼团人数为2人，最大拼团人数为3人，已经拼团1人，此时同时有2人点击了拼团，则最终以拼团3人成团；如果此时同时有4人点击了拼团，则只能成交3人，第4人将无法成交")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"拼团时效",prop:"aging"}},[r("el-input",{attrs:{maxlength:"11",placeholder:"请输入拼团时效",clearable:""},model:{value:e.ruleForm.aging,callback:function(t){e.$set(e.ruleForm,"aging",t)},expression:"ruleForm.aging"}}),e._v(" "),r("p",[e._v("单位：小时;用户发起拼团后开始计时，需在设置时间内达到拼团人数，超过时效时间，则系统判定拼团失败，自动发起退款")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"是否限制购买数",prop:"is_purchase_number"}},[r("el-radio-group",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.is_purchase_number,callback:function(t){e.$set(e.ruleForm,"is_purchase_number",t)},expression:"ruleForm.is_purchase_number"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),e._v(" "),1===e.ruleForm.is_purchase_number?r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"购买数量",prop:"is_purchase_number"}},[r("el-input",{attrs:{maxlength:"11",placeholder:"请输入购买数量",clearable:""},model:{value:e.ruleForm.purchase_number,callback:function(t){e.$set(e.ruleForm,"purchase_number",t)},expression:"ruleForm.purchase_number"}}),e._v(" "),r("p",[e._v("限制每次可购买数量")])],1):e._e(),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"是否上架",prop:"is_show"}},[r("el-radio-group",{attrs:{placeholder:"请选择是否上架"},model:{value:e.ruleForm.is_show,callback:function(t){e.$set(e.ruleForm,"is_show",t)},expression:"ruleForm.is_show"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"排序",prop:"sort"}},[r("el-input",{staticStyle:{width:"80px"},attrs:{maxlength:"11",placeholder:"请输入排序",clearable:""},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}}),e._v(" "),r("p",[e._v("越小越靠前")])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"是否推荐",prop:"is_recommend"}},[r("el-radio-group",{attrs:{placeholder:"请选择是否推荐"},model:{value:e.ruleForm.is_recommend,callback:function(t){e.$set(e.ruleForm,"is_recommend",t)},expression:"ruleForm.is_recommend"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"产品参数"}},[r("el-table",{key:e.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.ruleForm.group_purchase_sku,height:"400","row-key":"id",border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{"reserve-selection":!0,type:"selection",width:"55",fixed:"left"}}),e._v(" "),e._l(e.ruleForm.group_purchase_sku[0].product_sku,function(t,i){return r("el-table-column",{key:i,attrs:{label:t.key,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.product_sku[i].value)+"\n            ")]}}])})}),e._v(" "),r("el-table-column",{attrs:{label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("avatar-image",{attrs:{file:t.row.img,width:60,height:60},on:{getFile:function(r){return e.getFile(r,t.$index)}}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"拼团价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{clearable:""},model:{value:t.row.group_purchase_price,callback:function(r){e.$set(t.row,"group_purchase_price",r)},expression:"scope.row.group_purchase_price"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"成本价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.cost_price))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"原价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"库存",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.inventory))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"限量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{clearable:""},model:{value:t.row.limit,callback:function(r){e.$set(t.row,"limit",r)},expression:"scope.row.limit"}})]}}])})],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"详情",prop:"details"}},[r("tinymce",{ref:"editor",attrs:{url:e.actionurl,header:e.imgHeaders},model:{value:e.ruleForm.details,callback:function(t){e.$set(e.ruleForm,"details",t)},expression:"ruleForm.details"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{disabled:!!e.id},on:{click:function(t){e.active=0}}},[e._v("上一步")]),e._v(" "),r("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.create():e.edit()}}},[e._v("提交")])],1)],1):e._e()])],1)},a=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})},JxI4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(r("5WJX"));r("RsPH");var a=o(r("ynI1"));function o(e){return e&&e.__esModule?e:{default:e}}r("DWi2"),r("Tqh3"),r("Oupb"),r("B9FH"),r("hOyB"),r("lDS1"),r("ZNhe"),r("MVQK"),r("Qjfq"),r("Cp0W"),r("6tNa"),t.default={name:"Tinymce",components:{Editor:a.default},props:{url:{default:"",type:String},accept:{default:"image/jpeg, image/png, image/gif",type:String},maxSize:{default:2097152,type:Number},value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"lists image media table link wordcount code fullscreen preview axupimgs"},toolbar:{type:[String,Array],default:"axupimgs media lists table link | undo redo |  formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent  | removeformat code fullscreen image preview"},header:{type:[String,Object],default:""}},data:function(){var e=this;return{init:{language_url:"./static/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"./static/tinymce/skins/ui/oxide",content_css:"./static/tinymce/skins/content/default/content.css",height:300,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,images_upload_handler:function(t,r,i){if(t.blob().size>e.maxSize&&i("文件体积过大"),e.accept.indexOf(t.blob().type)>=0){var a=new XMLHttpRequest,o=new FormData,n=e;a.withCredentials=!1,a.open("POST",n.url),a.setRequestHeader("Authorization",n.header.Authorization),a.onload=function(){if(200!==a.status)return n.$emit("on-upload-fail"),void i("上传失败: "+JSON.parse(a.response).message);r(a.responseText)},o.append("file",t.blob()),o.append("type",1),o.append("size",e.maxSize),a.send(o)}else i("图片格式错误")}},myValue:this.value}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit("input",e)}},mounted:function(){i.default.init({})},methods:{onClick:function(e){this.$emit("onClick",e,i.default)},clear:function(){this.myValue=""}}}},LGSU:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-upload",{staticClass:"avatar-uploader",style:{height:e.height+"px",width:e.width+"px"},attrs:{action:e.url,data:e.imgData,headers:e.imgHeaders,"show-file-list":!1,"on-success":e.handleSuccessList,"before-upload":e.beforeUploadList,"on-error":e.handleError}},[e.file?[1===e.imgData.type?r("el-image",{attrs:{src:e.file,fit:"cover"}}):r("i",{staticClass:"el-icon-folder avatar-uploader-icon",style:{height:e.height+"px",width:e.width+"px"}})]:r("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:{height:e.height+"px",width:e.width+"px"}})],2)],1)},a=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})},Lcw6:function(e,t,r){"use strict";var i=r("qULk");r.n(i).a},M3qR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("Y5bG");t.default={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&(0,i.scrollTo)(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&(0,i.scrollTo)(0,800)}}}},MpT8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("X4fA");t.default={name:"AvatarImage",props:{imgData:{type:Object,default:function(){return{type:1,size:2097152,specification:[80,150]}}},format:{type:Array,default:function(){return["image/jpeg","image/gif","image/png","image/bmp"]}},height:{type:Number,default:160},width:{type:Number,default:160},file:{type:String,default:""}},data:function(){return{url:"http://dsshop.test/api/v1/admin/uploadPictures",imgHeaders:{Authorization:(0,i.getToken)("token_type")+" "+(0,i.getToken)("access_token")}}},watch:{},mounted:function(){},methods:{handleSuccessList:function(e,t){this.$emit("getFile",t)},beforeUploadList:function(e){var t=e.size<this.imgData.size;return-1===this.format.indexOf(e.type)?(this.$message.error("请上传正确的文件格式"),!1):(t||this.$message.error("上传文件大小不能超过 "+e.size/1024/1024+"MB!"),t)},handleError:function(e){this.$message.error(JSON.parse(e.message).message)}}}},Mz3J:function(e,t,r){"use strict";r.r(t);var i=r("cJ0Q"),a=r("6g3Z");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);r("Lcw6");var n=r("KHd+"),s=Object(n.a)(a.default,i.a,i.b,!1,null,"331ed7d4",null);s.options.__file="index.vue",t.default=s.exports},VEkq:function(e,t,r){"use strict";var i=r("C08a");r.n(i).a},Wkq7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(e){return(0,i.default)({url:"good",method:"GET",params:e})},t.count=function(){return(0,i.default)({url:"goodCount",method:"GET"})},t.create=function(e){return e=a.default.parse(e),(0,i.default)({url:"good",method:"POST",data:e})},t.edit=function(e){return e=a.default.parse(e),(0,i.default)({url:"good/"+e.id,method:"POST",data:e})},t.destroy=function(e,t){return t=a.default.parse(t),(0,i.default)({url:"good/destroy/"+e,method:"POST",data:t})},t.detail=function(e){return(0,i.default)({url:"good/"+e,method:"GET"})},t.state=function(e,t){return t=a.default.parse(t),(0,i.default)({url:"good/state/"+e,method:"POST",data:t})},t.specification=function(e){return(0,i.default)({url:"good/specification/"+e,method:"GET"})};var i=o(r("t3Un")),a=o(r("Qyje"));function o(e){return e&&e.__esModule?e:{default:e}}},XVEj:function(e,t,r){},Y5bG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrollTo=function(e,t,r){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=e-a,n=0;t=void 0===t?500:t,function e(){n+=20;var s=Math.easeInOutQuad(n,a,o,t);!function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(s),n<t?i(e):r&&"function"==typeof r&&r()}()},Math.easeInOutQuad=function(e,t,r,i){return(e/=i/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}},alm3:function(e,t,r){"use strict";r.r(t);var i=r("rqW4"),a=r("v1P2");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);var n=r("KHd+"),s=Object(n.a)(a.default,i.a,i.b,!1,null,null,null);s.options.__file="index.vue",t.default=s.exports},cJ0Q:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[r("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})},"gDS+":function(e,t,r){e.exports={default:r("t/pG"),__esModule:!0}},hmiM:function(e,t,r){"use strict";r.r(t);var i=r("JJXq"),a=r("2O1b");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);var n=r("KHd+"),s=Object(n.a)(a.default,i.a,i.b,!1,null,null,null);s.options.__file="Detail.vue",t.default=s.exports},mFzb:function(e,t,r){"use strict";r.r(t);var i=r("uCkJ"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t.default=a.a},o5wi:function(e,t,r){"use strict";r.r(t);var i=r("LGSU"),a=r("9D+X");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);r("CyJc");var n=r("KHd+"),s=Object(n.a)(a.default,i.a,i.b,!1,null,"aeb3b832",null);s.options.__file="AvatarImage.vue",t.default=s.exports},oIP7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r("D8LS"));t.default=i.default},qULk:function(e,t,r){},rqW4:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tinymce-box"},[r("editor",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)},a=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})},"t/pG":function(e,t,r){var i=r("VSTI"),a=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},uCkJ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("Wkq7"),a=function(e){return e&&e.__esModule?e:{default:e}}(r("Mz3J"));t.default={components:{Pagination:a.default},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{formLoading:!1,listLoading:!1,multipleSelection:[],tableKey:0,total:0,visible:!1,list:[],listQuery:{page:1,limit:10,sort:"+id"}}},created:function(){},methods:{open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";this.mode=e,this.visible=!0,this.getList()},sortChange:function(e){var t=e.prop,r=e.order;this.listQuery.sort="ascending"===r?"+"+t:"-"+t,this.handleFilter()},getList:function(){var e=this;this.listLoading=!0,(0,i.getList)(this.listQuery).then(function(t){e.list=t.data.data,e.total=t.data.total,e.listLoading=!1})},handleCheckAllChange:function(){this.$refs.multipleTable.toggleAllSelection()},hasChange:function(e){var t=this;(0,i.detail)(e.id).then(function(e){t.$emit("success",e.data.goods),t.visible=!1})},handleFilter:function(){this.listQuery.page=1,this.getList()}}}},v1P2:function(e,t,r){"use strict";r.r(t);var i=r("JxI4"),a=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t.default=a.a},xDBg:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{visible:e.visible,title:"商品选取"},on:{"update:visible":function(t){e.visible=t}}},[r("div",{staticClass:"filter-container"},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.listQuery}},[r("el-form-item",{attrs:{label:"关键字"}},[r("el-input",{attrs:{placeholder:"商品标题/商品货号",clearable:""},on:{input:e.handleFilter},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,height:"400","row-key":"id",border:"",fit:"","highlight-current-row":""},on:{"sort-change":e.sortChange}},[r("el-table-column",{attrs:{label:"编号",sortable:"custom",prop:"id",fixed:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-radio",{attrs:{label:t.row.id},on:{change:function(r){e.hasChange(t.row)}}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e._f("smallImage")(t.row.resources.img,150),"preview-src-list":[t.row.resources.img]}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"商品",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"drawing"},[r("div",{staticClass:"right"},[r("div",[e._v(e._s(t.row.name))]),e._v(" "),t.row.price_show.length>1?r("div",[e._v("¥ "+e._s(e._f("1000")(t.row.price_show[0]))+" - "+e._s(e._f("1000")(t.row.price_show[1])))]):r("div",[e._v("¥ "+e._s(e._f("1000")(t.row.price_show[0])))])])])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"分类",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.category?t.row.category.name:"无"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"货号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.number))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"库存",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.inventory_show))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"状态",sortable:"custom",prop:"is_show",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.putaway_show))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"上架时间",sortable:"custom",prop:"time",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.time?t.row.time:"未发布"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"更新时间",sortable:"custom",prop:"updated_at",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.updated_at))])]}}])})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],staticClass:"pagination-operation"},[r("pagination",{staticClass:"pagination",attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){e.$set(e.listQuery,"page",t)},"update:limit":function(t){e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1)],1)],1)},a=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a})},yA02:function(e,t,r){"use strict";r.r(t);var i=r("xDBg"),a=r("mFzb");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);r("VEkq");var n=r("KHd+"),s=Object(n.a)(a.default,i.a,i.b,!1,null,null,null);s.options.__file="Good.vue",t.default=s.exports}}]);