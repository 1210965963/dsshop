(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7eac"],{"0ux/":function(e,t,a){"use strict";a.r(t);var r={name:"CreateComponentsList",components:{Detail:a("t2SP").a}},n=a("KHd+"),i=Object(n.a)(r,function(){var e=this.$createElement;return(this._self._c||e)("detail",{attrs:{"is-edit":!1}})},[],!1,null,null,null);i.options.__file="create.vue";t.default=i.exports},Md11:function(e,t,a){},Qoha:function(e,t,a){"use strict";var r=a("Md11");a.n(r).a},dOsP:function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"a",function(){return o}),a.d(t,"e",function(){return u}),a.d(t,"d",function(){return s}),a.d(t,"c",function(){return c});var r=a("t3Un"),n=a("Qyje"),i=a.n(n);function l(e){return Object(r.a)({url:"components",method:"get",params:e})}function o(e){return e=(e=i.a.parse({data:e})).data,Object(r.a)({url:"components",method:"POST",data:e})}function u(e,t){return t=(t=i.a.parse({data:t})).data,Object(r.a)({url:"components/"+e,method:"PUT",data:t})}function s(e,t){return t=(t=i.a.parse({data:t})).data,Object(r.a)({url:"components/"+e,method:"DELETE",data:t})}function c(e){return Object(r.a)({url:"components/"+e,method:"GET"})}},t2SP:function(e,t,a){"use strict";var r=a("dOsP"),n={name:"ComponentsDetail",props:{isEdit:{type:Boolean,default:!1}},data:function(){return{actionurl:"https://dssaas.dswjcms.com/api/v1/admin/uploadPictures",dialogVisible:!1,loading:!1,id:"",ruleForm:{php:[{value:""}],vue:[{value:""}],database:[{value:""}],packages:[{value:""}],composer:[{value:""}]},imgProgress:!1,imgData:{type:1,size:2097152},dialogStatus:"create",imgProgressPercent:0,rules:{name:[{required:!0,message:"请输入模组名称",trigger:"blur"}],describe:[{required:!0,message:"请输入模组描述",trigger:"blur"}]}}},created:function(){this.isEdit&&(this.id=this.$route.query.id),this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.id>0?Object(r.c)(this.id).then(function(t){e.ruleForm=t.data,e.dialogStatus="update",e.loading=!1}):this.loading=!1},addMenu:function(e){this.ruleForm[e].push({value:""})},removeMenu:function(e,t){var a=this.ruleForm[e].indexOf(t);-1!==a&&this.ruleForm[e].splice(a,1)},createSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&Object(r.a)(e.ruleForm).then(function(){e.dialogFormVisible=!1,e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.creatingSuccessful"),type:"success",duration:2e3}),setTimeout(e.$router.back(-1),2e3)})})},updateSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&Object(r.e)(e.ruleForm.id,e.ruleForm).then(function(){e.dialogFormVisible=!1,e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.updateSuccessful"),type:"success",duration:2e3}),setTimeout(e.$router.back(-1),2e3)})})},handleAvatarSuccess:function(e,t){this.ruleForm.img=t.response,this.imgProgress=!1,this.imgProgressPercent=0},handleProgress:function(e,t){this.imgProgressPercent=e.percent},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):(t||this.$message.error("上传头像图片大小不能超过 2MB!"),this.imgProgress=!0,t)}}},i=(a("Qoha"),a("KHd+")),l=Object(i.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"createPost-container",staticStyle:{"padding-top":"40px"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{"padding-left":"200px","padding-right":"20px",width:"900px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"模组名称",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:"30",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模组介绍",prop:"describe"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"请输入模组介绍",maxlength:"200","show-word-limit":""},model:{value:e.ruleForm.describe,callback:function(t){e.$set(e.ruleForm,"describe",t)},expression:"ruleForm.describe"}})],1),e._v(" "),e._l(e.ruleForm.php,function(t,r){return a("el-form-item",{key:"php"+r,attrs:{label:0===r?"PHP关联文件":"",prop:"php."+r+".value"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"php.value"}}),r>0?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){a.preventDefault(),e.removeMenu("php",t)}}}):e._e()],1)}),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.addMenu("php")}}},[e._v("新增")])],1),e._v(" "),e._l(e.ruleForm.vue,function(t,r){return a("el-form-item",{key:"vue"+r,attrs:{label:0===r?"VUE关联文件":"",prop:"vue."+r+".value"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"vue.value"}}),r>0?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){a.preventDefault(),e.removeMenu("vue",t)}}}):e._e()],1)}),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.addMenu("vue")}}},[e._v("新增")])],1),e._v(" "),e._l(e.ruleForm.database,function(t,r){return a("el-form-item",{key:"database"+r,attrs:{label:0===r?"关联数据表":"",prop:"database."+r+".value"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"database.value"}}),r>0?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){a.preventDefault(),e.removeMenu("database",t)}}}):e._e()],1)}),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.addMenu("database")}}},[e._v("新增")])],1),e._v(" "),e._l(e.ruleForm.packages,function(t,r){return a("el-form-item",{key:"packages"+r,attrs:{label:0===r?"关联的VUE组件":"",prop:"packages."+r+".value"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"packages.value"}}),r>0?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){a.preventDefault(),e.removeMenu("packages",t)}}}):e._e()],1)}),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.addMenu("packages")}}},[e._v("新增")])],1),e._v(" "),e._l(e.ruleForm.composer,function(t,r){return a("el-form-item",{key:"composer"+r,attrs:{label:0===r?"关联的PHP扩展":"",prop:"composer."+r+".value"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"composer.value"}}),r>0?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){a.preventDefault(),e.removeMenu("composer",t)}}}):e._e()],1)}),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.addMenu("composer")}}},[e._v("新增")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createSubmit():e.updateSubmit()}}},[e._v("提交")])],1)],2)],1)},[],!1,null,null,null);l.options.__file="Detail.vue";t.a=l.exports}}]);