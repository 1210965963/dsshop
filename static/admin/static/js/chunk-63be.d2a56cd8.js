(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-63be"],{"+/4z":function(t,e,l){"use strict";var a=l("BYdx");l.n(a).a},BYdx:function(t,e,l){},DluV:function(t,e,l){},Vu0l:function(t,e,l){},fL5K:function(t,e,l){"use strict";var a=l("DluV");l.n(a).a},iTrz:function(t,e,l){"use strict";l.d(e,"b",function(){return r}),l.d(e,"a",function(){return n}),l.d(e,"f",function(){return s}),l.d(e,"e",function(){return c}),l.d(e,"d",function(){return p}),l.d(e,"c",function(){return m});var a=l("t3Un"),i=l("Qyje"),o=l.n(i);function r(t){return Object(a.a)({url:"elements",method:"get",params:t})}function n(t){return t=(t=o.a.parse({data:t})).data,Object(a.a)({url:"elements",method:"POST",data:t})}function s(t,e){return e=(e=o.a.parse({data:e})).data,Object(a.a)({url:"elements/"+t,method:"PUT",data:e})}function c(t,e){return e=(e=o.a.parse({data:e})).data,Object(a.a)({url:"elements/"+t,method:"DELETE",data:e})}function p(t){return Object(a.a)({url:"elements/"+t,method:"GET"})}function m(t,e){return Object(a.a)({url:"relevance/"+t,method:"GET",params:{id:e}})}},mW5v:function(t,e,l){"use strict";var a=l("Vu0l");l.n(a).a},qaLa:function(t,e,l){"use strict";var a=l("iTrz"),i=l("e+jF"),o=l.n(i),r=l("X4fA"),n={name:"DsEditeor",components:{GridLayout:o.a.GridLayout,GridItem:o.a.GridItem},props:{layouts:{type:Array,default:function(){return[]}}},data:function(){return{layout:this.layouts,helpVisible:!1,actionurl:"https://dssaas.dswjcms.com/api/v1/admin/uploadPictures",imgHeaders:{Authorization:Object(r.a)("token_type")+" "+Object(r.a)("access_token")},imgData:{type:1,size:2097152},imgProgressPercent:0,dialogFormVisible:!1,boxCard:!1,typeWidth:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],boxCardRight:["1"],tempImg:{},lableIndex:-1,imgProgress:!1,temp:{on:!1,x:0,y:0,w:0,h:0,type:{width:0,height:0,font_weight:"",color:"#303133",line_height:"",text_align:"",text_decoration:""},content:"",border:{width:"",color:"",style:""},padding:{top:"",bottom:"",left:"",right:""},margin:{top:"",bottom:"",left:"",right:""},background:{color:"#FFFFFF"}}}},watch:{layouts:function(){this.layouts=this.layout}},methods:{addLabel:function(t){var e={},l=0,a=2,i=this.lableIndex,o=this.layout;switch(this.layout.map(function(t,e){l+=t.h}),t){case"text":e={on:!1,x:0,y:l,w:24,h:a,i:this.layout.length,t:t,type:{width:24,height:a,font_weight:"",color:"#303133",line_height:"",text_align:"",text_decoration:""},content:"这是文字"+this.layout.length,border:{width:"",color:"",style:""},padding:{top:"",bottom:"",left:"",right:""},margin:{top:"",bottom:"",left:"",right:""},background:{color:"#FFFFFF"}};break;case"img":e={on:!1,x:0,y:l,w:24,h:a=8,i:this.layout.length,t:t,type:{width:24,height:a,font_weight:"",color:"#303133",line_height:"",text_align:"",text_decoration:""},img:"",border:{width:"",color:"",style:""},padding:{top:"",bottom:"",left:"",right:""},margin:{top:"",bottom:"",left:"",right:""},background:{color:"#FFFFFF"}}}i>=0&&(e.y=o[i].y+o[i].h,o.map(function(t,a){t.y===e.y&&(o[a].y=l)})),this.layout.push(e)},checkedLableEvent:function(t,e){this.layout.map(function(t){t.on=!1}),this.layout[e].on=!0,this.boxCard=!0,this.temp=t,this.lableIndex=e},dblclickImg:function(t){"img"===t.t&&(this.tempImg={},this.dialogFormVisible=!0,this.tempImg=t)},deleteLableEvent:function(){this.layout.splice(this.lableIndex,1),this.lableIndex=-1,this.boxCard=!1,this.dialogFormVisible=!1},hidePanel:function(t){"el-scrollbar__wrap"===t.target.className&&(this.layout.map(function(t){t.on=!1}),this.boxCard=!1)},selectedImage:function(){if(!this.tempImg.uploadingImg&&!this.tempImg.networkImg)return this.$message.error("请选择图片"),!1;this.tempImg.uploadingImg?this.tempImg.img=this.tempImg.uploadingImg:this.tempImg.networkImg&&(this.tempImg.img=this.tempImg.networkImg),this.dialogFormVisible=!1,this.lableIndex=-1},handleAvatarSuccess:function(t,e){this.tempImg.uploadingImg=e.response,this.imgProgress=!1,this.imgProgressPercent=0},handleProgress:function(t,e){this.imgProgressPercent=t.percent},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(t.type)?(this.$message.error("请上传正确的图片格式"),!1):(e||this.$message.error("上传头像图片大小不能超过 2MB!"),this.imgProgress=!0,e)}}},s=(l("+/4z"),l("fL5K"),l("KHd+")),c=Object(s.a)(n,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"ds-editor"},[l("el-col",{staticClass:"top"},[l("el-card",{attrs:{"body-style":{padding:"0px"},shadow:"always"}},[l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"图片",placement:"bottom-start"}},[l("span",{staticClass:"el-icon-picture-outline",on:{click:function(e){t.addLabel("img")}}})]),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"文本",placement:"bottom-start"}},[l("span",{staticClass:"el-icon-edit-outline",on:{click:function(e){t.addLabel("text")}}})]),t._v(" "),l("span",{staticClass:"el-icon-question",staticStyle:{float:"right","margin-right":"10px"},on:{click:function(e){t.helpVisible=!0}}})],1)],1),t._v(" "),l("div",{staticClass:"grid-layout",on:{click:t.hidePanel}},[l("el-scrollbar",{staticClass:"grid-scrollbar",staticStyle:{height:"100%","padding-top":"10px"}},[l("grid-layout",{attrs:{layout:t.layout,"col-num":24,"row-height":30,"is-draggable":!0,"is-resizable":!0,"is-mirrored":!1,"vertical-compact":!0,margin:[0,0],"use-css-transforms":!0},on:{"update:layout":function(e){t.layout=e}}},t._l(t.layout,function(e,a){return l("grid-item",{key:a+e.i,staticClass:"grid-item",class:{on:e.on},attrs:{id:"myPanel"+a,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}},[l("div",{staticStyle:{width:"100%",height:"100%"},on:{click:function(l){t.checkedLableEvent(e,a)},dblclick:function(l){t.dblclickImg(e)}}},["text"===e.t?l("div",{style:{width:"100%",height:"100%","font-size":e.type.font_size+"px","font-weight":e.type.font_weight,color:e.type.color,"line-height":e.type.line_height+"px","text-decoration":e.type.text_decoration,"text-align":e.type.text_align,"border-width":e.border.width?e.border.width+"px":"","border-style":e.border.style,"border-color":e.border.color,"padding-top":e.padding.top+"px","padding-right":e.padding.right+"px","padding-left":e.padding.left+"px","padding-bottom":e.padding.bottom+"px","margin-top":e.margin.top+"px","margin-right":e.margin.right+"px","margin-left":e.margin.left+"px","margin-bottom":e.margin.bottom+"px","background-color":e.background.color}},[t._v("\n              "+t._s(e.content)+"\n            ")]):"img"===e.t?l("div",{style:{width:"100%",height:"100%","font-size":e.type.font_size+"px","font-weight":e.type.font_weight,color:e.type.color,"line-height":e.type.line_height+"px","text-decoration":e.type.text_decoration,"text-align":e.type.text_align,"border-width":e.border.width?e.border.width+"px":"","border-style":e.border.style,"border-color":e.border.color,"padding-top":e.padding.top+"px","padding-right":e.padding.right+"px","padding-left":e.padding.left+"px","padding-bottom":e.padding.bottom+"px","margin-top":e.margin.top+"px","margin-right":e.margin.right+"px","margin-left":e.margin.left+"px","margin-bottom":e.margin.bottom+"px","background-color":e.background.color}},[l("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.img}},[l("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[l("i",{staticClass:"el-icon-picture-outline"})])])],1):t._e()])])}))],1)],1),t._v(" "),t.boxCard?l("el-card",{staticClass:"box-card-right",attrs:{"body-style":{padding:"10px",height:"370px","overflow-y":"auto"}}},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[t._v("设置面板")]),t._v(" "),l("el-button",{staticClass:"el-icon-close",staticStyle:{float:"right",padding:"3px 0","font-size":"20px"},attrs:{type:"text"},on:{click:function(e){t.boxCard=!1}}})],1),t._v(" "),l("el-scrollbar",{staticClass:"grid-scrollbar",staticStyle:{height:"100%"}},[l("el-collapse",{attrs:{accordion:""},model:{value:t.boxCardRight,callback:function(e){t.boxCardRight=e},expression:"boxCardRight"}},["text"===t.temp.t?l("el-collapse-item",{attrs:{title:"内容",name:"1"}},[l("el-form",{ref:"contentForm",staticStyle:{"margin-right":"5px"},attrs:{"label-width":"60px"}},[l("el-input",{attrs:{type:"textarea",autosize:"",size:"mini",clearable:"",placeholder:"请输入内容"},model:{value:t.temp.content,callback:function(e){t.$set(t.temp,"content",e)},expression:"temp.content"}})],1)],1):t._e(),t._v(" "),l("el-collapse-item",{attrs:{title:"类型",name:"2"}},[l("el-form",{ref:"dataForm",staticStyle:{"margin-right":"5px"},attrs:{model:t.temp.type,"label-width":"60px"}},[l("el-form-item",{attrs:{label:"字号"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{size:"mini",maxlength:"16",clearable:""},model:{value:t.temp.type.font_size,callback:function(e){t.$set(t.temp.type,"font_size",e)},expression:"temp.type.font_size"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"字体粗细"}},[l("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择"},model:{value:t.temp.type.font_weight,callback:function(e){t.$set(t.temp.type,"font_weight",e)},expression:"temp.type.font_weight"}},[l("el-option",{attrs:{label:"正常",value:"normal"}}),t._v(" "),l("el-option",{attrs:{label:"加粗",value:"bold"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"宽"}},[l("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:t.temp.w,callback:function(e){t.$set(t.temp,"w",e)},expression:"temp.w"}},t._l(t.typeWidth,function(t){return l("el-option",{key:t,attrs:{label:t+"格",value:t}})})),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"宽为网络模式，共24格",placement:"bottom-start"}},[l("span",{staticClass:"el-icon-question",staticStyle:{color:"#909399"}})])],1),t._v(" "),l("el-form-item",{attrs:{label:"高"}},[l("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini",maxlength:"16",clearable:""},model:{value:t.temp.h,callback:function(e){t.$set(t.temp,"h",t._n(e))},expression:"temp.h"}}),t._v(" "),l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"高的结果都将*30，可以理解为30PX一行",placement:"bottom-start"}},[l("span",{staticClass:"el-icon-question",staticStyle:{color:"#909399"}})])],1),t._v(" "),l("el-form-item",{attrs:{label:"行高"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{size:"mini",maxlength:"16",clearable:""},model:{value:t.temp.type.line_height,callback:function(e){t.$set(t.temp.type,"line_height",t._n(e))},expression:"temp.type.line_height"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"字体颜色"}},[l("el-color-picker",{model:{value:t.temp.type.color,callback:function(e){t.$set(t.temp.type,"color",e)},expression:"temp.type.color"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"文本修饰"}},[l("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择"},model:{value:t.temp.type.text_decoration,callback:function(e){t.$set(t.temp.type,"text_decoration",e)},expression:"temp.type.text_decoration"}},[l("el-option",{attrs:{label:"下划线",value:"underline"}}),t._v(" "),l("el-option",{attrs:{label:"上划线",value:"overline"}}),t._v(" "),l("el-option",{attrs:{label:"删除线",value:"line-through"}}),t._v(" "),l("el-option",{attrs:{label:"无",value:"none"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"对齐方式"}}),t._v(" "),l("el-radio-group",{attrs:{size:"mini"},model:{value:t.temp.type.text_align,callback:function(e){t.$set(t.temp.type,"text_align",e)},expression:"temp.type.text_align"}},[l("el-radio-button",{attrs:{label:"left"}},[t._v("左对齐")]),t._v(" "),l("el-radio-button",{attrs:{label:"center"}},[t._v("居中")]),t._v(" "),l("el-radio-button",{attrs:{label:"right"}},[t._v("右对齐")]),t._v(" "),l("el-radio-button",{attrs:{label:"justify"}},[t._v("两端对齐")])],1)],1)],1),t._v(" "),l("el-collapse-item",{attrs:{title:"边框",name:"3"}},[l("el-form",{ref:"dataForm",staticStyle:{"margin-right":"5px"},attrs:{model:t.temp.border,"label-width":"60px"}},[l("el-form-item",{attrs:{label:"宽度"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{size:"mini",maxlength:"16",clearable:""},model:{value:t.temp.border.width,callback:function(e){t.$set(t.temp.border,"width",e)},expression:"temp.border.width"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"类型"}},[l("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择"},model:{value:t.temp.border.style,callback:function(e){t.$set(t.temp.border,"style",e)},expression:"temp.border.style"}},[l("el-option",{attrs:{label:"点线",value:"dotted"}}),t._v(" "),l("el-option",{attrs:{label:"虚线",value:"dashed"}}),t._v(" "),l("el-option",{attrs:{label:"直线",value:"solid"}}),t._v(" "),l("el-option",{attrs:{label:"无",value:"none"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"颜色"}},[l("el-color-picker",{model:{value:t.temp.border.color,callback:function(e){t.$set(t.temp.border,"color",e)},expression:"temp.border.color"}})],1)],1)],1),t._v(" "),l("el-collapse-item",{attrs:{title:"内边距",name:"4"}},[l("el-form",{ref:"dataForm",staticStyle:{"margin-right":"5px"},attrs:{"label-width":"60px"}},[l("el-form-item",{attrs:{label:"上"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{autosize:"",size:"mini",clearable:""},model:{value:t.temp.padding.top,callback:function(e){t.$set(t.temp.padding,"top",e)},expression:"temp.padding.top"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"下"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{autosize:"",size:"mini",clearable:""},model:{value:t.temp.padding.bottom,callback:function(e){t.$set(t.temp.padding,"bottom",e)},expression:"temp.padding.bottom"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"左"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{autosize:"",size:"mini",clearable:""},model:{value:t.temp.padding.left,callback:function(e){t.$set(t.temp.padding,"left",e)},expression:"temp.padding.left"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"右"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{autosize:"",size:"mini",clearable:""},model:{value:t.temp.padding.right,callback:function(e){t.$set(t.temp.padding,"right",e)},expression:"temp.padding.right"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1)],1)],1),t._v(" "),l("el-collapse-item",{attrs:{title:"外边距",name:"5"}},[l("el-form",{ref:"dataForm",staticStyle:{"margin-right":"5px"},attrs:{"label-width":"60px"}},[l("el-form-item",{attrs:{label:"上"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{autosize:"",size:"mini",clearable:""},model:{value:t.temp.margin.top,callback:function(e){t.$set(t.temp.margin,"top",e)},expression:"temp.margin.top"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"下"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{autosize:"",size:"mini",clearable:""},model:{value:t.temp.margin.bottom,callback:function(e){t.$set(t.temp.margin,"bottom",e)},expression:"temp.margin.bottom"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"左"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{autosize:"",size:"mini",clearable:""},model:{value:t.temp.margin.left,callback:function(e){t.$set(t.temp.margin,"left",e)},expression:"temp.margin.left"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"右"}},[l("el-input",{staticStyle:{width:"160px"},attrs:{autosize:"",size:"mini",clearable:""},model:{value:t.temp.margin.right,callback:function(e){t.$set(t.temp.margin,"right",e)},expression:"temp.margin.right"}},[l("template",{slot:"append"},[t._v("PX")])],2)],1)],1)],1),t._v(" "),l("el-collapse-item",{attrs:{title:"背景",name:"6"}},[l("el-form",{ref:"dataForm",staticStyle:{"margin-right":"5px"},attrs:{"label-width":"60px"}},[l("el-form-item",{attrs:{label:"背景颜色"}},[l("el-color-picker",{model:{value:t.temp.background.color,callback:function(e){t.$set(t.temp.background,"color",e)},expression:"temp.background.color"}})],1)],1)],1),t._v(" "),l("el-button",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{type:"danger",round:""},on:{click:function(e){t.deleteLableEvent()}}},[t._v("删除")])],1)],1)],1):t._e(),t._v(" "),l("el-dialog",{attrs:{visible:t.dialogFormVisible,title:"图片选取"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[l("el-form",{ref:"imgForm",attrs:{model:t.tempImg,"label-position":"left"}},[l("el-tabs",{staticStyle:{height:"400px"},attrs:{"tab-position":"left"}},[l("el-tab-pane",{attrs:{label:"上传图片"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,"on-progress":t.handleProgress,action:t.actionurl,headers:t.imgHeaders,data:t.imgData}},[t.imgProgress?l("span",[l("el-progress",{staticClass:"progress-img",attrs:{percentage:t.imgProgressPercent,type:"circle"}})],1):l("span",[t.tempImg.uploadingImg?l("img",{staticClass:"avatar",attrs:{src:t.tempImg.uploadingImg}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])])],1),t._v(" "),l("el-tab-pane",{attrs:{label:"本地资源"}},[t._v("暂无")]),t._v(" "),l("el-tab-pane",{attrs:{label:"网络图片"}},[l("el-input",{attrs:{clearable:"",placeholder:"网络图片地址"},model:{value:t.tempImg.networkImg,callback:function(e){t.$set(t.tempImg,"networkImg",e)},expression:"tempImg.networkImg"}}),t._v(" "),t.tempImg.networkImg?l("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t.tempImg.networkImg,fit:"scale-down"}},[l("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("\n              加载中"),l("span",{staticClass:"dot"},[t._v("...")])])]):t._e()],1)],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("usuel.cancel")))]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(e){t.selectedImage()}}},[t._v("确定")])],1)],1),t._v(" "),l("el-dialog",{attrs:{visible:t.helpVisible,title:"帮助",width:"30%"},on:{"update:visible":function(e){t.helpVisible=e}}},[l("p",[l("b",[t._v("版本：")])]),t._v(" "),l("p",[t._v("V0.001")]),t._v(" "),l("p",[t._v("当前版本支持图片和文本添加")]),t._v(" "),l("p",[l("b",[t._v("操作：")])]),t._v(" "),l("p",[t._v("点击添加的控件，右边就可以对该控件进行属性编辑")]),t._v(" "),l("p",[t._v("如图片控件，长按可选择图片")]),t._v(" "),l("p",[t._v("图片控件，如果不添加图片，保存时将会自动删除")]),t._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.helpVisible=!1}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(e){t.helpVisible=!1}}},[t._v("确 定")])],1)])],1)},[],!1,null,"7195c9c7",null);c.options.__file="index.vue";var p={name:"ElementsListDetail",components:{DsEditor:c.exports},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{submitLoading:!1,step:0,actionurl:"https://dssaas.dswjcms.com/api/v1/admin/uploadPictures",dialogVisible:!1,dialogImageUrl:"",loading:!1,id:"",ruleForm:{name:"",type:1,identify:"",description:"",details:[],shows:1,element_version:[],element_rule:[]},relevance:[],imgProgress:!1,imglimit:10,imgData:{type:1,size:2097152},dialogStatus:"create",imgProgressPercent:0,rules:{name:[{required:!0,message:"请填写组件名称",trigger:"blur"}],identify:[{required:!0,message:"请填写组件标识",trigger:"blur"},{validator:function(t,e,l){/^[A-Za-z_]+$/.test(e)?l():l(new Error("组件标识只能是英文字母加下划线"))},trigger:"blur"}],description:[{required:!0,message:"请填写组件描述",trigger:"blur"}],type:[{required:!0,message:"请选择组件类型",trigger:"change"}],shows:[{required:!0,message:"请选择是否显示",trigger:"change"}]}}},created:function(){this.isEdit&&(this.id=this.$route.query.id),this.getList()},methods:{getList:function(){var t=this;this.loading=!0,this.id>0?Object(a.d)(this.id).then(function(e){t.ruleForm=e.data,1!==t.ruleForm.type&&t.getRelevance(t.ruleForm.type),t.dialogStatus="update",t.loading=!1}):(this.ruleForm.element_rule=[{api:"List",icon:"",title:"列表",menu:!0,sort:5},{api:"Create",icon:"",title:"添加",menu:!1,sort:5},{api:"Update",icon:"",title:"更新",menu:!1,sort:5},{api:"Delete",icon:"",title:"删除",menu:!1,sort:5},{api:"Details",icon:"",title:"详情页",menu:!1,sort:5}],Object(a.d)(0).then(function(e){t.loading=!1}))},getRelevance:function(t){var e=this;1!==t&&Object(a.c)(this.ruleForm.type,this.ruleForm.id).then(function(t){e.relevance=t.data})},createSubmit:function(){var t=this;this.$refs.ruleForm.validate(function(e){e&&Object(a.a)(t.ruleForm).then(function(){t.dialogFormVisible=!1,t.$notify({title:t.$t("hint.succeed"),message:t.$t("hint.creatingSuccessful"),type:"success",duration:2e3}),setTimeout(t.$router.back(-1),2e3)})})},updateSubmit:function(){var t=this;this.$refs.ruleForm.validate(function(e){e&&Object(a.f)(t.ruleForm.id,t.ruleForm).then(function(){t.dialogFormVisible=!1,t.$notify({title:t.$t("hint.succeed"),message:t.$t("hint.updateSuccessful"),type:"success",duration:2e3}),setTimeout(t.$router.back(-1),2e3)})})},handleGoodsGalleryRemove:function(t){this.ruleForm.img.splice(t,1)},addRule:function(){this.ruleForm.element_rule.push({api:"",icon:"",title:"",menu:!1,sort:5})},deleteRule:function(t){this.ruleForm.element_rule.splice(t,1)},addSalesProperty:function(){this.ruleForm.element_version.push({name:"",price:"",number:"",terminal:"",discounts:"",min:"",max:""})},deleteSalesProperty:function(t){this.ruleForm.element_version.splice(t,1)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleAvatarSuccess:function(t,e,l){this.ruleForm.img.push(e.response)},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(t.type)?(this.$message.error("请上传正确的图片格式"),!1):(e||this.$message.error("上传头像图片大小不能超过 2MB!"),this.imgProgress=!0,e)}}},m=(l("mW5v"),Object(s.a)(p,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"createPost-container",staticStyle:{"padding-top":"40px"}},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{"padding-right":"20px"},attrs:{model:t.ruleForm,rules:t.rules,"label-width":"200px"}},[l("el-form-item",{attrs:{label:"组件名称",prop:"name"}},[l("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:"30",clearable:""},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"组件标识",prop:"identify"}},[l("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:"30",clearable:""},model:{value:t.ruleForm.identify,callback:function(e){t.$set(t.ruleForm,"identify",e)},expression:"ruleForm.identify"}})],1),t._v(" "),l("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"组件图标",prop:"icon"}},[l("el-input",{attrs:{clearable:""},model:{value:t.ruleForm.icon,callback:function(e){t.$set(t.ruleForm,"icon",e)},expression:"ruleForm.icon"}}),t._v(" "),t.ruleForm.icon?l("div",[l("svg-icon",{attrs:{"icon-class":t.ruleForm.icon}})],1):t._e()],1),t._v(" "),l("el-form-item",{attrs:{label:"组件描述",prop:"description"}},[l("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",maxlength:"30",clearable:""},model:{value:t.ruleForm.description,callback:function(e){t.$set(t.ruleForm,"description",e)},expression:"ruleForm.description"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"组件类型",prop:"type"}},[l("el-radio-group",{on:{change:t.getRelevance},model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},[l("el-radio",{attrs:{label:1}},[t._v("通用组件")]),t._v(" "),l("el-radio",{attrs:{label:2}},[t._v("功能组件")]),t._v(" "),l("el-radio",{attrs:{label:3}},[t._v("行业组件")])],1),t._v(" "),l("div",{staticClass:"tip"},[l("p",[t._v("1、通用组件：不可出售，不可关联其它组件")]),t._v(" "),l("p",[t._v("2、功能组件：不可单独出售，可关联通用组件和功能组件")]),t._v(" "),l("p",[t._v("3、行业组件：可以单独出售、捆绑出售、可关联通用组件、功能组件、其它行业组件")]),t._v(" "),l("p",[t._v("4、一般情况出售给租户的应该是行业组件，而功能组件是在行业组件下作为各版本功能区分升级之用")])])],1),t._v(" "),3!=t.ruleForm.type?l("el-form-item",{attrs:{label:"组件权限"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ruleForm.element_rule,border:""}},[l("el-table-column",{attrs:{prop:"title",label:"权限名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.row.title,callback:function(l){t.$set(e.row,"title",l)},expression:"scope.row.title"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"api",label:"权限标识"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.row.api,callback:function(l){t.$set(e.row,"api",l)},expression:"scope.row.api"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"icon",label:"权限图标"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"20",clearable:""},model:{value:e.row.icon,callback:function(l){t.$set(e.row,"icon",l)},expression:"scope.row.icon"}}),t._v(" "),e.row.icon?l("div",[l("svg-icon",{attrs:{"icon-class":e.row.icon}})],1):t._e()],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"menu",label:"导航状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-switch",{model:{value:e.row.menu,callback:function(l){t.$set(e.row,"menu",l)},expression:"scope.row.menu"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"sort",label:"排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"11",clearable:""},model:{value:e.row.sort,callback:function(l){t.$set(e.row,"sort",l)},expression:"scope.row.sort"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){t.deleteRule(e.$index)}}})],1)]}}])})],1)],1):t._e(),t._v(" "),3!=t.ruleForm.type?l("el-form-item",[l("el-button",{attrs:{type:"primary",round:""},on:{click:t.addRule}},[t._v("添加组件权限")]),t._v(" "),l("div",{staticClass:"tip"},[l("p",[t._v("1.组件权限默认会生成列表、添加、更新、删除、详情几个权限，请根据实现需求进行填写")]),t._v(" "),l("p",[t._v("2.组件权限名称和权限标识全网唯一")]),t._v(" "),l("p",[t._v("3.“导航状态”为“租户端”显示的导航，故默认只有列表是显示状态")]),t._v(" "),l("p",[t._v("4.“权限图标”为“租户端”显示的导航时的图标")])])],1):t._e(),t._v(" "),1!=t.ruleForm.type?l("div",[l("el-form-item",{attrs:{label:"销售属性"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ruleForm.element_version,border:""}},[l("el-table-column",{attrs:{prop:"name",label:"版本名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.row.name,callback:function(l){t.$set(e.row,"name",l)},expression:"scope.row.name"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"number",label:"版本号"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.row.number,callback:function(l){t.$set(e.row,"number",l)},expression:"scope.row.number"}})],1)]}}])}),t._v(" "),3===t.ruleForm.type?l("el-table-column",{attrs:{prop:"number",label:"终端"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-select",{attrs:{clearable:"",multiple:""},model:{value:e.row.terminal,callback:function(l){t.$set(e.row,"terminal",l)},expression:"scope.row.terminal"}},[l("el-option",{attrs:{value:"web",label:"web"}}),t._v(" "),l("el-option",{attrs:{value:"h5",label:"h5"}}),t._v(" "),l("el-option",{attrs:{value:"wechat",label:"微信小程序"}}),t._v(" "),l("el-option",{attrs:{value:"alipay",label:"支付宝小程序"}}),t._v(" "),l("el-option",{attrs:{value:"swan",label:"百度小程序"}})],1)],1)]}}])}):t._e(),t._v(" "),l("el-table-column",{attrs:{prop:"price",label:"价格/月"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.row.price,callback:function(l){t.$set(e.row,"price",l)},expression:"scope.row.price"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"discounts",label:"优惠折扣"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.row.discounts,callback:function(l){t.$set(e.row,"discounts",l)},expression:"scope.row.discounts"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"min",label:"起购期限/月"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.row.min,callback:function(l){t.$set(e.row,"min",l)},expression:"scope.row.min"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"max",label:"最大期限/月"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-input",{attrs:{maxlength:"30",clearable:""},model:{value:e.row.max,callback:function(l){t.$set(e.row,"max",l)},expression:"scope.row.max"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"relevance",label:"关联属性"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-select",{attrs:{multiple:"",placeholder:"可多选",clearable:""},model:{value:e.row.relevance,callback:function(l){t.$set(e.row,"relevance",l)},expression:"scope.row.relevance"}},t._l(t.relevance,function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{staticClass:"drawing"},[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){t.deleteSalesProperty(e.$index)}}})],1)]}}])})],1)],1),t._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary",round:""},on:{click:t.addSalesProperty}},[t._v("添加销售属性")]),t._v(" "),l("div",{staticClass:"tip"},[l("p",[t._v("1.版本名称一般为基础版、高级版")]),t._v(" "),l("p",[t._v("2.价格为每月的价格")]),t._v(" "),l("p",[t._v("3.优惠折扣为折扣价格，如95即95折，不填写为无优惠")]),t._v(" "),l("p",[t._v("4.最大期限必须大于等于起购期限")]),t._v(" "),l("p",[t._v("5.关联属性允许关联多个组件，用来打包出售")]),t._v(" "),l("p",[t._v("6.销售属性不要随意删除，如已发布的组件进行了删除，将导致租户端数据错乱")])])],1)],1):t._e(),t._v(" "),l("el-form-item",{attrs:{label:"组件详情",prop:"details"}}),t._v(" "),l("el-form-item",{attrs:{label:"是否显示",prop:"shows"}},[l("el-radio-group",{model:{value:t.ruleForm.shows,callback:function(e){t.$set(t.ruleForm,"shows",e)},expression:"ruleForm.shows"}},[l("el-radio",{attrs:{label:1}},[t._v("显示")]),t._v(" "),l("el-radio",{attrs:{label:2}},[t._v("隐藏")])],1)],1),t._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createSubmit():t.updateSubmit()}}},[t._v("提交")])],1)],1)],1)},[],!1,null,null,null));m.options.__file="Detail.vue";e.a=m.exports}}]);