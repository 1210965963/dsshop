(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5213"],{"8XtF":function(e,t,r){},MAv2:function(e,t,r){"use strict";r.r(t);var a={name:"CreateListTemplate",components:{Detail:r("zj42").a}},i=r("KHd+"),s=Object(i.a)(a,function(){var e=this.$createElement;return(this._self._c||e)("detail",{attrs:{"is-edit":!1}})},[],!1,null,null,null);s.options.__file="create.vue";t.default=s.exports},VhrR:function(e,t,r){"use strict";r.d(t,"b",function(){return l}),r.d(t,"a",function(){return o}),r.d(t,"e",function(){return n}),r.d(t,"d",function(){return u}),r.d(t,"c",function(){return c});var a=r("t3Un"),i=r("Qyje"),s=r.n(i);function l(e){return Object(a.a)({url:"listTemplates",method:"get",params:e})}function o(e){return e=(e=s.a.parse({data:e})).data,Object(a.a)({url:"listTemplates",method:"POST",data:e})}function n(e,t){return t=(t=s.a.parse({data:t})).data,Object(a.a)({url:"listTemplates/"+e,method:"PUT",data:t})}function u(e,t){return t=(t=s.a.parse({data:t})).data,Object(a.a)({url:"listTemplates/"+e,method:"DELETE",data:t})}function c(e){return Object(a.a)({url:"listTemplates/"+e,method:"GET"})}},tGC7:function(e,t,r){"use strict";var a=r("8XtF");r.n(a).a},zj42:function(e,t,r){"use strict";var a=r("VhrR"),i=r("X4fA"),s={name:"ListTemplatesDetail",props:{isEdit:{type:Boolean,default:!1}},data:function(){return{actionurl:"https://dssaas.dswjcms.com/api/v1/admin/uploadPictures",imgHeaders:{Authorization:Object(i.a)("token_type")+" "+Object(i.a)("access_token")},dialogVisible:!1,loading:!1,id:"",ruleForm:{state:0,sort:"5",img:""},imgProgress:!1,imgData:{type:1,size:2097152},dialogStatus:"create",imgProgressPercent:0,rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],price:[{required:!0,message:"请填写价格",trigger:"change"}],img:[{required:!0,message:"请上传图片",trigger:"change"}],state:[{required:!0,message:"请选择状态",trigger:"change"}],sort:[{required:!0,message:"请填写排序",trigger:"blur"}]}}},created:function(){this.isEdit&&(this.id=this.$route.query.id),this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.id>0?Object(a.c)(this.id).then(function(t){e.ruleForm=t.data,e.dialogStatus="update",e.loading=!1}):this.loading=!1},createSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&Object(a.a)(e.ruleForm).then(function(){e.dialogFormVisible=!1,e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.creatingSuccessful"),type:"success",duration:2e3}),setTimeout(e.$router.back(-1),2e3)})})},updateSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&Object(a.e)(e.ruleForm.id,e.ruleForm).then(function(){e.dialogFormVisible=!1,e.$notify({title:e.$t("hint.succeed"),message:e.$t("hint.updateSuccessful"),type:"success",duration:2e3}),setTimeout(e.$router.back(-1),2e3)})})},handleAvatarSuccess:function(e,t){this.ruleForm.img=t.response,this.imgProgress=!1,this.imgProgressPercent=0},handleProgress:function(e,t){this.imgProgressPercent=e.percent},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):(t||this.$message.error("上传头像图片大小不能超过 2MB!"),this.imgProgress=!0,t)}}},l=(r("tGC7"),r("KHd+")),o=Object(l.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"createPost-container",staticStyle:{"padding-top":"40px"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{"padding-left":"200px","padding-right":"20px",width:"900px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{maxlength:"16",clearable:""},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"价格",prop:"price"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:"13",clearable:""},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"类型",prop:"type"}},[r("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择类型",clearable:""},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-option",{attrs:{value:0,label:"默认"}}),e._v(" "),r("el-option",{attrs:{value:1,label:"商品"}}),e._v(" "),r("el-option",{attrs:{value:2,label:"文章"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"图片",prop:"img"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-progress":e.handleProgress,action:e.actionurl,headers:e.imgHeaders,data:e.imgData}},[e.imgProgress?r("span",[r("el-progress",{staticClass:"progress-img",attrs:{percentage:e.imgProgressPercent,type:"circle"}})],1):r("span",[e.ruleForm.img?r("img",{staticClass:"avatar",attrs:{src:e.ruleForm.img}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])])],1),e._v(" "),r("el-form-item",{attrs:{label:"是否显示",prop:"state"}},[r("el-radio-group",{model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},[r("el-radio",{attrs:{label:0}},[e._v("显示")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("隐藏")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-radio-group",{model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}},[r("el-input",{staticStyle:{width:"80px"},attrs:{maxlength:"11",clearable:""},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createSubmit():e.updateSubmit()}}},[e._v("提交")])],1)],1)],1)},[],!1,null,null,null);o.options.__file="Detail.vue";t.a=o.exports}}]);